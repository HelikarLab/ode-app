{"version":3,"sources":["assets/node.png","assets/arrow.png","store/index.js","components/NavBar/index.js","components/ImportSbmlForm/index.js","components/SavedModels/index.js","components/ModelTab/Graph/GraphLegend.js","components/ModelTab/Graph/index.js","components/ModelTab/ReactionsList/index.js","components/ModelTab/MetabolitesList/index.js","components/ModelTab/InfoPanel/index.js","components/ModelTab/index.js","components/Button/index.js","components/SimulationTab/SettingsPanel/index.js","components/SimulationTab/Plot/index.js","components/SimulationTab/MetabolitesPanel/CustomSwitch.js","components/SimulationTab/MetabolitesPanel/index.js","components/SimulationTab/ReactionsPanel/RatelawForm.js","components/SimulationTab/ReactionsPanel/index.js","components/SimulationTab/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","model","modelMetadata","importSbml","thunk","actions","file","formData","FormData","append","name","axios","method","url","concat","process","data","then","res","json","JSON","parse","modelTab","setCurrentModel","initSimulation","error","err","message","getModel","payload","jsonModel","setModelMetadata","id","sbmlVersion","sbmlLevel","console","log","action","state","simulationTab","reactions","currentModel","map","reaction","Object","objectSpread","ratelaw","parameters","checked","metabolitesFromModel","metabolites","metabolite","initialConcentration","compartments","saveModel","_ref","getStoreState","icmin","icmax","icstep","computed","resultData","graphData","filter","item","simulate","_ref2","newReactions","forEach","Error","push","simulationPayload","time","dataPoints","modifiedData","concentrationData","updateResult","switchReaction","_ref3","updateMetabolites","setRatelaw","toggleMetabolite","setIcmin","setIcmax","updateIc","reactants","reactant","_","includes","products","product","store","createStore","NavBar","props","_React$useState","React","useState","_React$useState2","slicedToArray","active","setActive","react_default","a","createElement","Navbar","color","dark","expand","NavbarBrand","href","Nav","navbar","NavItem","NavLink","onClick","className","style","marginRight","Button","importModel","savedModels","ImportSbmlForm","closeModal","useStoreActions","Fragment","formik_esm","initialValues","onSubmit","asyncToGenerator","regenerator_default","mark","_callee","values","wrap","_context","prev","next","sent","toast","stop","_x","_x2","apply","this","arguments","render","Form","handleSubmit","FormGroup","required","type","placeholder","onChange","event","setFieldValue","currentTarget","files","FormText","API_URL","SavedModels","setData","useEffect","ListGroup","flush","ListGroupItem","tag","success","key","format","Date","createdAt","GraphLegend","Graph","nodes","edges","currentCompartment","dropdown","toggle","_this","setState","selectCompartment","compartment","gen","_this$props","reactionNodes","generateReactionNodes","metabolitesNodes","reduce","result","label","generateReactionEdges","compartmentReactions","length","metaboliteNodes","_unused","findNode","object","temp","node","index","reactionsEdges","reversible","source","target","_this2","graph","ccNetViz","document","getElementById","styles","background","minSize","maxSize","texture","require","hideSize","edge","width","arrow","aspect","reactionNode","reactantEdge","productEdge","reversibleReactantEdge","reversibleProductEdge","onChangeViewport","viewport","onLoad","getNodesCount","getEdgesCount","onDrag","onZoom","onDblClick","passiveEvts","set","draw","prevProps","prevState","_this3","remove","_this4","react_icons_kit","icon","infoCircle","UncontrolledTooltip","placement","Graph_GraphLegend","Dropdown","isOpen","DropdownToggle","DropdownMenu","DropdownItem","height","Component","ReactionsList","overflowY","setInfo","setType","MetabolitesList","InfoPanel","String","reactionString","ModelTab","_React$useState3","_React$useState4","info","_React$useState5","_React$useState6","modal","setModal","_useStoreState","useStoreState","Modal","ModalHeader","ModalBody","Row","padding","Col","md","ModelTab_Graph","ModelTab_ReactionsList","ModelTab_MetabolitesList","marginTop","ModelTab_InfoPanel","float","outline","disabled","buttonContent","classes","curved","loading","react_loading_default","children","join","defaultProps","settingsSchema","Yup","shape","min","max","SettingsPanel","_useStoreActions","Card","CardBody","marginBottom","validationSchema","t0","setSubmitting","isSubmitting","errors","row","Label","for","sm","e","value","Number","components_Button","Plot","globalRatelaw","modelData","dataString","encodeURIComponent","stringify","exportAnchorElement","setAttribute","react_apexcharts_min_default","options","chart","xaxis","tickAmount","series","CustomSwitch","metaboliteId","switched","setSwitched","CustomInput","s","CSlider","Slider","createSliderWithTooltip","MetabolitesPanel","Table","borderless","hover","step","MetabolitesPanel_CustomSwitch","RatelawForm","k1","k2","parametersArr","property","hasOwnProperty","ReactionsPanel","setReaction","ReactionsPanel_RatelawForm","maxHeight","Input","SimulationTab","react_grid_layout_default","isDraggable","layout","i","x","y","w","h","cols","items","rowHeight","onLayoutChange","autoSize","SimulationTab_SettingsPanel","SimulationTab_MetabolitesPanel","SimulationTab_Plot","SimulationTab_ReactionsPanel","configure","position","POSITION","BOTTOM_RIGHT","autoClose","App","importModal","setImportModal","savedModal","setSavedModal","react_router_dom","components_NavBar","components_ImportSbmlForm","components_SavedModels","react_router","path","component","Boolean","window","location","hostname","match","ReactDOM","easy_peasy_esm","Helmet","charSet","src_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bc28c585.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98DBg8SMBgGJhQAAAJcSURBVDjLrZO/alRREMa/mXPOvXf/BEmybhQiBDXamM7HECxU1AgW1mIlIgiClU+ghaSLElnBPICNL2Fh4b/KsKzsZt299557z5mxiFkT0UqnnOI33/fNDPCPRb83Tj162+W0eYNcetW65FzTMR/JzLt2wq/aCW++uLLy9Y+Akw/fELG5QC59SjZdbrba6LQsjrUtjs85NB2jjtqvRW+Pvbx+dvFEBAC7D1CJF4hND2wz12hpKzVYaBhaXUyxttTQo02DvJbu+4Hf+jyq1gH0AIABYOXe9lGIPAVxRmw0MUwtRzTfsDg5n+D0QkIr8wmd6WR6tpOaxPKT673PyzOA+PyGSlwGoGTdzFZqCJllZI7hmGAZlDlWx9QZe7k1A2isr0LCnpUYoaoQBfJasDMJ6E8Cdn3EsIjoTwKmVcS0itdmGWjt16QqwY1IkAAfFXkt+FZEfBp6AMBi08AHxcdhRTuTgLGX1RlAfM5gC60KiHEglyKvUgyme6pGpaDhCEGAQR4wmAaUQfBLQfDvJB+dj0mmlDRIfI6CGAAQVTEqAgwToih8VAyLiFhOPx5cYy/mu+f3w7NHuoAKCm2jDA6GCY4JtShCXWkYD0hr3zugoN5UiXfDbr8roVKtPZm5RXBVgoxDtA6VCqQqNYx2SKpyRMZsHLrEpSsPL0s5eamhNuRSNa15cNYmTpsAMaTKVfIxaazBSXbz6/P7m4cukYzbJpuuq+qTWHzvxOkQYAuinzOIiZNsRDa9I8DWX5+pe+nBstb+lkq8plWxCoDIpR+ITY9sutHffvwF/7N+AOa9Ka0q3oiBAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADkSURBVDhPlZGxDgFRFER3JXQ+gEKiEBIqrdYHqHW+jc4HSETtV4iGRhS79z53NvNYPJt9k0yx9s7MiU1UtWOeRHoMO+d6KJiJqstFskhrrrpKrKVhD0f8gKI6LsIiN8umKEiNYho6rLKtL4sCCBQicqhDwfX7KwyRYhgKhJw5t/gogEixDwW8uf7ALWNvkaIfCpZt6/OfdS9S7EL/BdevwXUvUnS/w974Wn/XvUixLVNw/VS57kWKdnkZNo3wjmfVwqFRrLkMn2uHIRybW37diAZRBRApNrZ+iQ5DpGjiq/wvSJInLsNx8D4f8OUAAAAASUVORK5CYII=\"","import { createStore, action, thunk, computed } from 'easy-peasy'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL\r\n  ? process.env.REACT_APP_API_URL\r\n  : 'http://localhost:5000/'\r\n\r\nconst model = {\r\n  /*\r\n   * Common global state\r\n   */\r\n  modelMetadata: {},\r\n\r\n  //thunks\r\n  importSbml: thunk((actions, file) => {\r\n    const formData = new FormData()\r\n    formData.append('file', file, file.name)\r\n    return axios({\r\n      method: 'post',\r\n      url: `${API_URL}api/uploadSbml`,\r\n      data: formData,\r\n    })\r\n      .then(res => {\r\n        const json = JSON.parse(res.data)\r\n        actions.modelTab.setCurrentModel(json)\r\n      })\r\n      .then(() => {\r\n        actions.initSimulation()\r\n        return { error: false }\r\n      })\r\n      .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n  }),\r\n  getModel: thunk((actions, payload) => {\r\n    return axios({ method: 'get', url: `${API_URL}api/model/get/${payload}` })\r\n      .then(res => {\r\n        const data = res.data.jsonModel\r\n        actions.modelTab.setCurrentModel(data)\r\n        actions.setModelMetadata({\r\n          name: data.name,\r\n          id: data.id,\r\n          sbmlVersion: data.sbmlVersion,\r\n          sbmlLevel: data.sbmlLevel,\r\n        })\r\n      })\r\n      .then(() => {\r\n        actions.initSimulation()\r\n        return { error: false, message: 'Successfully retrieved model.' }\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        return { error: true, message: 'Something went wrong.' }\r\n      })\r\n  }),\r\n  //actions\r\n  initSimulation: action(state => {\r\n    state.simulationTab.reactions = state.modelTab.currentModel.reactions.map(\r\n      reaction => ({\r\n        ...reaction,\r\n        ratelaw: '',\r\n        parameters: [],\r\n        checked: false,\r\n      })\r\n    )\r\n    state.simulationTab.metabolitesFromModel = state.modelTab.currentModel.metabolites.map(\r\n      metabolite => ({ ...metabolite, initialConcentration: 0 })\r\n    )\r\n  }),\r\n  setModelMetadata: action((state, payload) => {\r\n    state.modelMetadata = {\r\n      name: payload.name,\r\n      id: payload.id,\r\n      sbmlVersion: payload.sbmlVersion,\r\n      sbmlLevel: payload.sbmlLevel,\r\n    }\r\n  }),\r\n\r\n  /*\r\n   * Model tab state\r\n   */\r\n\r\n  modelTab: {\r\n    currentModel: {\r\n      metabolites: [],\r\n      reactions: [],\r\n      compartments: [],\r\n    },\r\n    //thunks\r\n    saveModel: thunk((actions, payload, { getStoreState }) => {\r\n      const state = getStoreState()\r\n      return axios({\r\n        method: 'post',\r\n        url: `${API_URL}api/model/add`,\r\n        data: state.modelTab.currentModel,\r\n      })\r\n        .then(res => ({ message: 'Successfully saved.', error: false }))\r\n        .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n    }),\r\n    //actions\r\n    setCurrentModel: action((state, payload) => {\r\n      state.currentModel = payload\r\n    }),\r\n  },\r\n\r\n  /*\r\n   * Simulation tab state\r\n   */\r\n\r\n  simulationTab: {\r\n    icmin: 0,\r\n    icmax: 100,\r\n    icstep: computed(state => (state.icmax - state.icmin) / 100),\r\n    reactions: [],\r\n    metabolitesFromModel: [],\r\n    metabolites: [],\r\n    resultData: [],\r\n    graphData: computed(state => {\r\n      return state.resultData.filter(item => {\r\n        if (item.checked) return true\r\n        else return false\r\n      })\r\n    }),\r\n    //thunks\r\n    simulate: thunk((actions, payload, { getStoreState }) => {\r\n      const state = getStoreState()\r\n      let newReactions = []\r\n      state.simulationTab.reactions.forEach(reaction => {\r\n        if (reaction.checked === true) {\r\n          if (reaction.ratelaw === '') {\r\n            throw new Error('Ratelaw found empty for reaction: ' + reaction.id)\r\n          } else newReactions.push(reaction)\r\n        }\r\n      })\r\n      const simulationPayload = {\r\n        time: payload.time,\r\n        dataPoints: payload.dataPoints,\r\n        reactions: newReactions,\r\n        metabolites: state.simulationTab.metabolites,\r\n      }\r\n      return axios({\r\n        method: 'post',\r\n        url: `${API_URL}api/simulation`,\r\n        data: simulationPayload,\r\n      })\r\n        .then(res => {\r\n          const data = JSON.parse(res.data)\r\n          const modifiedData = data.concentrationData.map(item => ({\r\n            ...item,\r\n            checked: true,\r\n          }))\r\n          actions.updateResult(modifiedData)\r\n          return { error: false, message: 'Simulation successfull.' }\r\n        })\r\n        .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n    }),\r\n    //Switches (on/off) the reaction in the simulation\r\n    switchReaction: thunk((actions, payload, { getStoreState }) => {\r\n      let state = getStoreState()\r\n      state.simulationTab.reactions = state.simulationTab.reactions.map(\r\n        reaction => {\r\n          if (reaction.id === payload.id)\r\n            return { ...reaction, checked: !reaction.checked }\r\n          else return reaction\r\n        }\r\n      )\r\n      actions.updateMetabolites()\r\n    }),\r\n    //actions\r\n    setRatelaw: action((state, payload) => {\r\n      state.reactions = state.reactions.map(reaction => {\r\n        if (payload.id === reaction.id) {\r\n          return {\r\n            ...reaction,\r\n            ratelaw: payload.ratelaw,\r\n            parameters: payload.parameters,\r\n          }\r\n        } else return reaction\r\n      })\r\n    }),\r\n    toggleMetabolite: action((state, payload) => {\r\n      state.resultData = state.resultData.map(item => {\r\n        if (item.name === payload) {\r\n          return { ...item, checked: !item.checked }\r\n        } else return item\r\n      })\r\n    }),\r\n    updateResult: action((state, payload) => {\r\n      state.resultData = payload\r\n    }),\r\n    setIcmin: action((state, payload) => {\r\n      state.icmin = payload\r\n    }),\r\n    setIcmax: action((state, payload) => {\r\n      state.icmax = payload\r\n    }),\r\n    updateIc: action((state, payload) => {\r\n      state.metabolites.forEach(metabolite => {\r\n        if (metabolite.id === payload.id) {\r\n          metabolite.initialConcentration = payload.initialConcentration\r\n        }\r\n      })\r\n      state.metabolitesFromModel.forEach(metabolite => {\r\n        if (metabolite.id === payload.id) {\r\n          metabolite.initialConcentration = payload.initialConcentration\r\n        }\r\n      })\r\n    }),\r\n    // Updates the metabolites list\r\n    updateMetabolites: action((state, payload) => {\r\n      state.metabolites = []\r\n      state.reactions.map(reaction => {\r\n        if (reaction.checked) {\r\n          reaction.reactants.map(reactant => {\r\n            return state.metabolitesFromModel.map(metabolite => {\r\n              if (reactant.id === metabolite.id) {\r\n                if (!_.includes(state.metabolites, metabolite)) {\r\n                  return state.metabolites.push(metabolite)\r\n                } else {\r\n                  return false\r\n                }\r\n              } else {\r\n                return false\r\n              }\r\n            })\r\n          })\r\n          return reaction.products.map(product => {\r\n            return state.metabolitesFromModel.map(metabolite => {\r\n              if (product.id === metabolite.id) {\r\n                if (!_.includes(state.metabolites, metabolite)) {\r\n                  return state.metabolites.push(metabolite)\r\n                } else {\r\n                  return false\r\n                }\r\n              } else {\r\n                return false\r\n              }\r\n            })\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }),\r\n  },\r\n}\r\n\r\nexport const store = createStore(model)\r\n","import React from 'react'\r\nimport { Navbar, NavbarBrand, Nav, NavItem, NavLink, Button } from 'reactstrap'\r\n\r\nfunction NavBar(props) {\r\n  const [active, setActive] = React.useState('model')\r\n\r\n  return (\r\n    <Navbar color=\"dark\" dark expand=\"md\">\r\n      <NavbarBrand href=\"/\">ODE App</NavbarBrand>\r\n      <Nav navbar>\r\n        <NavItem>\r\n          <NavLink\r\n            active={active === 'model' ? true : false}\r\n            onClick={() => {\r\n              setActive('model')\r\n            }}\r\n            href=\"/#/model\"\r\n          >\r\n            Model\r\n          </NavLink>\r\n        </NavItem>\r\n        <NavItem>\r\n          <NavLink\r\n            active={active === 'simulation' ? true : false}\r\n            onClick={() => {\r\n              setActive('simulation')\r\n            }}\r\n            href=\"/#/simulation\"\r\n          >\r\n            Simulation\r\n          </NavLink>\r\n        </NavItem>\r\n      </Nav>\r\n      <Nav className=\"ml-auto\" navbar>\r\n        <NavItem style={{ marginRight: 20 }}>\r\n          <Button color=\"primary\" onClick={props.importModel}>\r\n            Import Model\r\n          </Button>\r\n        </NavItem>\r\n        <NavItem>\r\n          <Button color=\"info\" onClick={props.savedModels}>\r\n            Saved Models\r\n          </Button>\r\n        </NavItem>\r\n      </Nav>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n","import React from 'react'\r\nimport { Formik } from 'formik'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport { toast } from 'react-toastify'\r\nimport { Button, Form, FormText, FormGroup } from 'reactstrap'\r\n\r\nfunction ImportSbmlForm({ closeModal }) {\r\n  const importSbml = useStoreActions(actions => actions.importSbml)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Formik\r\n        initialValues={{ file: '' }}\r\n        onSubmit={async (values, actions) => {\r\n          if (values.file) {\r\n            const data = await importSbml(values.file)\r\n            if (data.error) toast.error(data.message)\r\n            else {\r\n              closeModal()\r\n            }\r\n          }\r\n        }}\r\n        render={props => (\r\n          <Form onSubmit={props.handleSubmit}>\r\n            <FormGroup>\r\n              <input\r\n                required\r\n                type=\"file\"\r\n                name=\"file\"\r\n                placeholder=\"Upload\"\r\n                onChange={event => {\r\n                  props.setFieldValue('file', event.currentTarget.files[0])\r\n                }}\r\n              />\r\n              <FormText color=\"muted\">\r\n                Please upload a .sbml or .xml file which is formatted atleast in\r\n                level 2 SBML for kinetic (ODE) models.\r\n              </FormText>\r\n            </FormGroup>\r\n            <Button color=\"primary\" type=\"submit\">\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ImportSbmlForm\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport { format } from 'date-fns'\r\nimport { toast } from 'react-toastify'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL\r\n  ? process.env.REACT_APP_API_URL\r\n  : 'http://localhost:5000/'\r\n\r\nfunction SavedModels() {\r\n  const [data, setData] = React.useState([])\r\n  const getModel = useStoreActions(actions => actions.getModel)\r\n\r\n  React.useEffect(() => {\r\n    axios({ method: 'get', url: `${API_URL}api/model/get/all` })\r\n      .then(res => setData(res.data))\r\n      .catch(err => console.error(err))\r\n  }, [])\r\n\r\n  if (data) {\r\n    return (\r\n      <ListGroup flush>\r\n        {data.map(item => (\r\n          <ListGroupItem\r\n            tag=\"button\"\r\n            action\r\n            onClick={async () => {\r\n              const data = await getModel(item.id)\r\n              if (data.error) toast.error(data.message)\r\n              else toast.success(data.message)\r\n            }}\r\n            key={item.id}\r\n          >\r\n            {item.name} -{' '}\r\n            {format(new Date(item.createdAt), 'D MMMM YYYY - hh:mm:ss A')}\r\n          </ListGroupItem>\r\n        ))}\r\n      </ListGroup>\r\n    )\r\n  } else {\r\n    return <div />\r\n  }\r\n}\r\n\r\nexport default SavedModels\r\n","import React from 'react'\r\n\r\nfunction GraphLegend() {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon blue\" />- Metabolite Nodes\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon red\" />- Reaction Nodes\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon green\" />- Reactant Edge\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon yellow\" />- Product Edge\r\n      </div>\r\n      <div className=\"flex\">--> - Reversible reactions</div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default GraphLegend\r\n","import React from 'react'\r\nimport ccNetViz from 'ccnetviz'\r\nimport _ from 'lodash'\r\nimport {\r\n  UncontrolledTooltip,\r\n  Dropdown,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  DropdownToggle,\r\n} from 'reactstrap'\r\nimport { Icon } from 'react-icons-kit'\r\nimport { infoCircle } from 'react-icons-kit/fa/infoCircle'\r\nimport GraphLegend from './GraphLegend'\r\nimport './style.scss'\r\n\r\nclass Graph extends React.Component {\r\n  state = {\r\n    nodes: [],\r\n    edges: [],\r\n    compartments: [],\r\n    currentCompartment: 'all',\r\n    dropdown: false,\r\n  }\r\n\r\n  toggle = () => {\r\n    this.setState({ dropdown: !this.state.dropdown })\r\n  }\r\n\r\n  selectCompartment = compartment => {\r\n    this.setState({ currentCompartment: compartment })\r\n  }\r\n\r\n  gen = () => {\r\n    const { reactions, metabolites, compartments } = this.props\r\n    const { currentCompartment } = this.state\r\n    this.setState({ compartments })\r\n    try {\r\n      if (currentCompartment === 'all') {\r\n        let reactionNodes = this.generateReactionNodes(reactions)\r\n        let metabolitesNodes = metabolites.reduce((result, metabolite) => {\r\n          result.push({ label: metabolite.id })\r\n          return result\r\n        }, [])\r\n        let nodes = _.concat(reactionNodes, metabolitesNodes)\r\n        let edges = this.generateReactionEdges(reactions, nodes)\r\n        this.setState({ nodes, edges })\r\n      } else {\r\n        let compartmentReactions = reactions.filter(reaction => {\r\n          if (\r\n            _.includes(reaction.compartments, currentCompartment) &&\r\n            reaction.compartments.length === 1\r\n          ) {\r\n            return true\r\n          } else return false\r\n        })\r\n        let reactionNodes = this.generateReactionNodes(compartmentReactions)\r\n        let metaboliteNodes = metabolites.reduce((result, metabolite) => {\r\n          if (metabolite.compartment === currentCompartment) {\r\n            result.push({ label: metabolite.id })\r\n          }\r\n          return result\r\n        }, [])\r\n        let nodes = _.concat(reactionNodes, metaboliteNodes)\r\n        let edges = this.generateReactionEdges(compartmentReactions, nodes)\r\n        this.setState({ nodes, edges })\r\n      }\r\n    } catch {}\r\n  }\r\n\r\n  generateReactionNodes = reactions => {\r\n    const reactionNodes = reactions.map(reaction => {\r\n      return {\r\n        label: reaction.id,\r\n        style: 'reactionNode',\r\n      }\r\n    })\r\n    return reactionNodes\r\n  }\r\n\r\n  findNode = (object, nodes) => {\r\n    let temp\r\n    nodes.filter((node, index) => {\r\n      if (node.label === object.label) {\r\n        return (temp = index)\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n    return temp\r\n  }\r\n\r\n  generateReactionEdges = (reactions, nodes) => {\r\n    const reactionsEdges = []\r\n    reactions.map(reaction => {\r\n      reaction.reactants.map(reactant => {\r\n        if (reaction.reversible) {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reactant.id }, nodes)],\r\n            target: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            style: 'reversibleReactantEdge',\r\n          })\r\n        } else {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reactant.id }, nodes)],\r\n            target: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            style: 'reactantEdge',\r\n          })\r\n        }\r\n      })\r\n      return reaction.products.map(product => {\r\n        if (reaction.reversible) {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            target: nodes[this.findNode({ label: product.id }, nodes)],\r\n            style: 'reversibleProductEdge',\r\n          })\r\n        } else {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            target: nodes[this.findNode({ label: product.id }, nodes)],\r\n            style: 'productEdge',\r\n          })\r\n        }\r\n      })\r\n    })\r\n    return reactionsEdges\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ compartments: this.props.compartments })\r\n    this.graph = new ccNetViz(document.getElementById('graph'), {\r\n      styles: {\r\n        background: {\r\n          color: 'rgb(255, 255, 255)',\r\n        },\r\n        node: {\r\n          minSize: 6,\r\n          maxSize: 16,\r\n          color: 'rgb(47, 109, 206)',\r\n          texture: require('../../../assets/node.png'),\r\n          label: {\r\n            color: 'rgb(0, 0, 0)',\r\n            hideSize: 16,\r\n          },\r\n        },\r\n        edge: {\r\n          width: 1,\r\n          color: 'rgb(50, 50, 50)',\r\n          arrow: {\r\n            minSize: 1,\r\n            maxSize: 16,\r\n            aspect: 1,\r\n            texture: require('../../../assets/arrow.png'),\r\n            hideSize: 1,\r\n          },\r\n          type: 'line',\r\n        },\r\n        reactionNode: {\r\n          color: 'rgb(200, 0, 0)',\r\n          label: {\r\n            hideSize: 16,\r\n          },\r\n        },\r\n        reactantEdge: {\r\n          color: 'rgb(89, 249, 2)',\r\n        },\r\n        productEdge: {\r\n          color: 'rgb(255, 246, 0)',\r\n        },\r\n        reversibleReactantEdge: { color: 'rgb(89, 249, 2)', type: 'dashed' },\r\n        reversibleProductEdge: { color: 'rgb(255, 246, 0)', type: 'dashed' },\r\n      },\r\n      onChangeViewport: function(viewport) {},\r\n      onLoad: function() {},\r\n      getNodesCount() {},\r\n      getEdgesCount() {},\r\n      onDrag: function(viewport) {},\r\n      onZoom: function(viewport) {},\r\n      onClick: function() {\r\n        return false\r\n      },\r\n      onDblClick: function() {},\r\n      passiveEvts: true,\r\n    })\r\n\r\n    this.gen()\r\n    this.graph.set(this.state.nodes, this.state.edges, 'force').then(() => {\r\n      this.graph.draw()\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps.reactions !== this.props.reactions ||\r\n      prevProps.metabolites !== this.props.metabolites\r\n    ) {\r\n      this.setState({ currentCompartment: 'all' })\r\n    }\r\n    if (\r\n      prevProps.reactions !== this.props.reactions ||\r\n      prevProps.metabolites !== this.props.metabolites ||\r\n      prevState.currentCompartment !== this.state.currentCompartment\r\n    ) {\r\n      this.gen()\r\n    }\r\n    if (\r\n      prevState.nodes !== this.state.nodes ||\r\n      prevState.edges !== this.state.edges\r\n    ) {\r\n      this.graph.set(this.state.nodes, this.state.edges, 'force').then(() => {\r\n        this.graph.draw()\r\n      })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.graph.remove()\r\n  }\r\n\r\n  render() {\r\n    const { compartments } = this.state\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">\r\n          Graph{` `}\r\n          <Icon icon={infoCircle} id=\"graph-legend-info\" />\r\n          <UncontrolledTooltip placement=\"right\" target=\"graph-legend-info\">\r\n            <GraphLegend />\r\n          </UncontrolledTooltip>\r\n        </h4>\r\n        <Dropdown isOpen={this.state.dropdown} toggle={this.toggle}>\r\n          <DropdownToggle color=\"success\">Compartments</DropdownToggle>\r\n          <DropdownMenu>\r\n            <DropdownItem\r\n              onClick={() => {\r\n                this.selectCompartment('all')\r\n              }}\r\n            >\r\n              All\r\n            </DropdownItem>\r\n            {compartments.map(compartment => (\r\n              <DropdownItem\r\n                key={compartment.id}\r\n                onClick={() => {\r\n                  this.selectCompartment(compartment.id)\r\n                }}\r\n              >\r\n                {compartment.name}\r\n              </DropdownItem>\r\n            ))}\r\n          </DropdownMenu>\r\n        </Dropdown>\r\n        <br />\r\n        <canvas id=\"graph\" width=\"600\" height=\"550\" className=\"graph-canvas\" />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Graph\r\n","import React from 'react'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nfunction ReactionsList(props) {\r\n  if (props.reactions) {\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">Reactions</h4>\r\n        <ListGroup style={{ height: '250px', overflowY: 'scroll' }}>\r\n          {props.reactions.map(reaction => (\r\n            <ListGroupItem\r\n              key={reaction.id}\r\n              tag=\"button\"\r\n              action\r\n              onClick={() => {\r\n                props.setInfo(reaction)\r\n                props.setType('reaction')\r\n              }}\r\n            >\r\n              {reaction.id} - {reaction.name}\r\n            </ListGroupItem>\r\n          ))}\r\n        </ListGroup>\r\n      </div>\r\n    )\r\n  } else {\r\n    return <div>No data</div>\r\n  }\r\n}\r\n\r\nexport default ReactionsList\r\n","import React from 'react'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nfunction MetabolitesList(props) {\r\n  if (props.metabolites) {\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">Metabolites</h4>\r\n        <ListGroup style={{ height: '250px', overflowY: 'scroll' }}>\r\n          {props.metabolites.map(metabolite => (\r\n            <ListGroupItem\r\n              key={metabolite.id}\r\n              tag=\"button\"\r\n              action\r\n              onClick={() => {\r\n                props.setInfo(metabolite)\r\n                props.setType('metabolite')\r\n              }}\r\n            >\r\n              {metabolite.id} - {metabolite.name}\r\n            </ListGroupItem>\r\n          ))}\r\n        </ListGroup>\r\n      </div>\r\n    )\r\n  } else {\r\n    return <div>No data</div>\r\n  }\r\n}\r\n\r\nexport default MetabolitesList\r\n","import React from 'react'\r\n\r\nfunction InfoPanel(props) {\r\n  if (props.type === 'metabolite') {\r\n    return (\r\n      <div>\r\n        <dl className=\"row\">\r\n          <dt className=\"col-sm-5\">Metabolite ID</dt>\r\n          <dd className=\"col-sm-7\">{props.data.id}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Metabolite Name</dt>\r\n          <dd className=\"col-sm-7\">{props.data.name}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Compartment</dt>\r\n          <dd className=\"col-sm-7\">{props.data.compartment}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Initial Concentration</dt>\r\n          <dd className=\"col-sm-7\">{props.data.initialConcentration}</dd>\r\n        </dl>\r\n      </div>\r\n    )\r\n  } else if (props.type === 'reaction') {\r\n    return (\r\n      <div>\r\n        <dl className=\"row\">\r\n          <dt className=\"col-sm-4\">Reaction ID</dt>\r\n          <dd className=\"col-sm-8\">{props.data.id}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reaction Name</dt>\r\n          <dd className=\"col-sm-8\">{props.data.name}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reversible</dt>\r\n          <dd className=\"col-sm-8\">{String(props.data.reversible)}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reaction</dt>\r\n          <dd className=\"col-sm-8\">{props.data.reactionString}</dd>\r\n        </dl>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div>\r\n        {/* <h5 className=\"text-muted\">Model Information</h5>\r\n        <dl className=\"row\">\r\n          <dt className=\"col-sm-3\">Model ID</dt>\r\n          <dd className=\"col-sm-9\">{props.modelId}</dd>\r\n\r\n          <dt className=\"col-sm-3\">Model Name</dt>\r\n          <dd className=\"col-sm-9\">{props.modelName}</dd>\r\n\r\n          <dt className=\"col-sm-3\">SBML Level</dt>\r\n          <dd className=\"col-sm-9\">{props.sbmlLevel}</dd>\r\n\r\n          <dt className=\"col-sm-3\">SBML Version</dt>\r\n          <dd className=\"col-sm-9\">{props.sbmlVersion}</dd>\r\n        </dl> */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default InfoPanel\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport { Row, Col, Button, Modal, ModalHeader, ModalBody } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport Graph from './Graph'\r\nimport ReactionsList from './ReactionsList'\r\nimport MetabolitesList from './MetabolitesList'\r\nimport InfoPanel from './InfoPanel'\r\n\r\nfunction ModelTab() {\r\n  const [type, setType] = React.useState('')\r\n  const [info, setInfo] = React.useState({})\r\n  const [modal, setModal] = React.useState(false)\r\n\r\n  const { reactions, metabolites, name, compartments } = useStoreState(\r\n    state => state.modelTab.currentModel\r\n  )\r\n\r\n  const saveModel = useStoreActions(actions => actions.modelTab.saveModel)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Modal\r\n        isOpen={modal}\r\n        toggle={() => {\r\n          setModal(!modal)\r\n        }}\r\n      >\r\n        <ModalHeader\r\n          toggle={() => {\r\n            setModal(!modal)\r\n          }}\r\n        >\r\n          Save your SBML Model\r\n        </ModalHeader>\r\n        <ModalBody>\r\n          Are you sure?\r\n          <br />\r\n          <br />\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={async () => {\r\n              const temp = await saveModel()\r\n              if (temp.error) toast.error(temp.message)\r\n              else toast.success(temp.message)\r\n              setModal(!modal)\r\n            }}\r\n          >\r\n            Yes\r\n          </Button>\r\n          {` `}\r\n          <Button color=\"danger\" onClick={() => setModal(!modal)}>\r\n            Cancel\r\n          </Button>\r\n        </ModalBody>\r\n      </Modal>\r\n      <Row style={{ padding: 20 }}>\r\n        <Col md=\"5\">\r\n          <Graph\r\n            reactions={reactions}\r\n            metabolites={metabolites}\r\n            compartments={compartments}\r\n          />\r\n        </Col>\r\n        <Col md=\"7\">\r\n          <Row>\r\n            <Col>\r\n              <ReactionsList\r\n                reactions={reactions}\r\n                setInfo={setInfo}\r\n                setType={setType}\r\n              />\r\n            </Col>\r\n            <Col>\r\n              <MetabolitesList\r\n                metabolites={metabolites}\r\n                setInfo={setInfo}\r\n                setType={setType}\r\n              />\r\n            </Col>\r\n          </Row>\r\n          <Row style={{ marginTop: 30 }}>\r\n            <Col>\r\n              <InfoPanel type={type} data={info} />\r\n            </Col>\r\n            <Col>\r\n              <Button\r\n                style={{ float: 'right' }}\r\n                outline\r\n                color=\"success\"\r\n                onClick={() => setModal(!modal)}\r\n                disabled={name ? false : true}\r\n              >\r\n                Save Model\r\n              </Button>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col />\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ModelTab\r\n","import React from 'react'\r\nimport ReactLoading from 'react-loading'\r\nimport PropTypes from 'prop-types'\r\nimport './style.scss'\r\n\r\nfunction Button(props) {\r\n  let classes = []\r\n  classes.push(props.className)\r\n  if (props.curved) {\r\n    classes.push('curved-button')\r\n  }\r\n  let buttonContent\r\n  if (props.loading) {\r\n    buttonContent = (\r\n      <ReactLoading\r\n        type={'bars'}\r\n        color={props.color}\r\n        height={'30px'}\r\n        width={'30px'}\r\n        className=\"button-loading-icon\"\r\n      />\r\n    )\r\n  } else {\r\n    buttonContent = props.children\r\n  }\r\n  return (\r\n    <button\r\n      type={props.type}\r\n      className={classes.join(' ')}\r\n      disabled={props.loading}\r\n      onClick={props.onClick}\r\n    >\r\n      {buttonContent}\r\n    </button>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  loading: PropTypes.bool,\r\n  curved: PropTypes.bool,\r\n  type: PropTypes.string,\r\n  color: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n}\r\n\r\nButton.defaultProps = {\r\n  loading: false,\r\n  curved: false,\r\n  type: 'button',\r\n  color: 'white',\r\n}\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport { useStoreActions, useStoreState } from 'easy-peasy'\r\nimport { Formik, Field } from 'formik'\r\nimport { Card, CardBody, Form, FormGroup, Label, Col } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport * as Yup from 'yup'\r\nimport Button from '../../Button'\r\n\r\nconst settingsSchema = Yup.object().shape({\r\n  time: Yup.number()\r\n    .min(2)\r\n    .max(1000)\r\n    .required('Required'),\r\n  dataPoints: Yup.number()\r\n    .min(2)\r\n    .max(5000)\r\n    .required('Required'),\r\n})\r\n\r\nfunction SettingsPanel() {\r\n  const { simulate, setIcmin, setIcmax } = useStoreActions(\r\n    actions => actions.simulationTab\r\n  )\r\n  const { icmin, icmax } = useStoreState(state => state.simulationTab)\r\n\r\n  return (\r\n    <Card>\r\n      <CardBody>\r\n        <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n          Settings\r\n        </h4>\r\n        <Formik\r\n          initialValues={{\r\n            time: 0,\r\n            dataPoints: 500,\r\n            icmin,\r\n            icmax,\r\n          }}\r\n          validationSchema={settingsSchema}\r\n          onSubmit={async (values, actions) => {\r\n            try {\r\n              const data = await simulate({\r\n                time: values.time,\r\n                dataPoints: values.dataPoints,\r\n              })\r\n              if (data.error) toast.error(data.message)\r\n              else toast.success(data.message)\r\n            } catch (err) {\r\n              toast.error(err.message)\r\n            }\r\n            actions.setSubmitting(false)\r\n          }}\r\n          render={({ handleSubmit, isSubmitting, errors, setFieldValue }) => (\r\n            <Form onSubmit={handleSubmit}>\r\n              <FormGroup row>\r\n                <Label for=\"time\" sm={5}>\r\n                  Time:\r\n                </Label>\r\n                <Col sm={7}>\r\n                  <Field\r\n                    className={`form-control ${\r\n                      errors.time ? 'is-invalid' : ''\r\n                    }`}\r\n                    type=\"number\"\r\n                    name=\"time\"\r\n                  />\r\n                </Col>\r\n              </FormGroup>\r\n              <FormGroup row>\r\n                <Label for=\"dataPoints\" sm={5}>\r\n                  Data Points:\r\n                </Label>\r\n                <Col sm={7}>\r\n                  <Field\r\n                    className={`form-control ${\r\n                      errors.dataPoints ? 'is-invalid' : ''\r\n                    }`}\r\n                    type=\"number\"\r\n                    name=\"dataPoints\"\r\n                  />\r\n                </Col>\r\n              </FormGroup>\r\n              <FormGroup row>\r\n                <Label for=\"icmin\" sm={5}>\r\n                  IC Min:\r\n                </Label>\r\n                <Col sm={7}>\r\n                  <Field\r\n                    className=\"form-control\"\r\n                    type=\"number\"\r\n                    name=\"icmin\"\r\n                    onChange={e => {\r\n                      setFieldValue('icmin', e.target.value)\r\n                      setIcmin(Number(e.target.value))\r\n                    }}\r\n                  />\r\n                </Col>\r\n              </FormGroup>\r\n              <FormGroup row>\r\n                <Label for=\"icmax\" sm={5}>\r\n                  IC Max:\r\n                </Label>\r\n                <Col sm={7}>\r\n                  <Field\r\n                    className=\"form-control\"\r\n                    type=\"number\"\r\n                    name=\"icmax\"\r\n                    onChange={e => {\r\n                      setFieldValue('icmax', e.target.value)\r\n                      setIcmax(Number(e.target.value))\r\n                    }}\r\n                  />\r\n                </Col>\r\n              </FormGroup>\r\n              <Button\r\n                type=\"submit\"\r\n                loading={isSubmitting}\r\n                className=\"btn btn-success\"\r\n              >\r\n                Run\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        />\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default SettingsPanel\r\n","import React from 'react'\r\nimport Chart from 'react-apexcharts'\r\nimport { useStoreState } from 'easy-peasy'\r\n\r\nfunction Plot() {\r\n  const data = useStoreState(state => state.simulationTab)\r\n  const modelMetadata = useStoreState(state => state.modelMetadata)\r\n\r\n  React.useEffect(() => {\r\n    let newReactions = []\r\n    data.reactions.forEach(reaction => {\r\n      if (reaction.checked === true) {\r\n        if (reaction.ratelaw === '') {\r\n          newReactions.push({ ...reaction, ratelaw: data.globalRatelaw })\r\n        } else newReactions.push(reaction)\r\n      }\r\n    })\r\n    const modelData = {\r\n      ...modelMetadata,\r\n      reactions: newReactions,\r\n      metabolites: data.metabolites,\r\n    }\r\n    const dataString =\r\n      'data:text/json;charset=utf-8,' +\r\n      encodeURIComponent(JSON.stringify(modelData))\r\n    const exportAnchorElement = document.getElementById('exportAnchorElement')\r\n    exportAnchorElement.setAttribute('href', dataString)\r\n    exportAnchorElement.setAttribute('download', 'model.json')\r\n  })\r\n\r\n  if (data.graphData) {\r\n    return (\r\n      <div>\r\n        <Chart\r\n          options={{\r\n            chart: {\r\n              id: 'apexchart-example',\r\n            },\r\n            xaxis: {\r\n              type: 'numeric',\r\n              tickAmount: 10,\r\n            },\r\n          }}\r\n          series={data.graphData}\r\n          type=\"line\"\r\n          width={550}\r\n          height={600}\r\n        />\r\n        <a\r\n          className=\"btn btn-dark\"\r\n          style={{ float: 'right' }}\r\n          id=\"exportAnchorElement\"\r\n          href=\"/\"\r\n        >\r\n          Export Data\r\n        </a>\r\n      </div>\r\n    )\r\n  } else return <div />\r\n}\r\n\r\nexport default Plot\r\n","import React from 'react'\r\nimport { CustomInput } from 'reactstrap'\r\n\r\nfunction CustomSwitch({ metaboliteId, toggle }) {\r\n  const [switched, setSwitched] = React.useState(true)\r\n\r\n  return (\r\n    <CustomInput\r\n      type=\"switch\"\r\n      id={metaboliteId}\r\n      onChange={e => {\r\n        setSwitched(s => !s)\r\n        toggle(metaboliteId)\r\n      }}\r\n      checked={switched}\r\n    />\r\n  )\r\n}\r\n\r\nexport default CustomSwitch\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport { Card, CardBody, Table } from 'reactstrap'\r\nimport Slider from 'rc-slider'\r\nimport 'rc-slider/assets/index.css'\r\nimport CustomSwitch from './CustomSwitch'\r\n\r\nconst CSlider = Slider.createSliderWithTooltip(Slider)\r\n\r\nfunction MetabolitesPanel() {\r\n  const { metabolites, icstep, icmin, icmax } = useStoreState(\r\n    state => state.simulationTab\r\n  )\r\n\r\n  const { toggleMetabolite, updateIc } = useStoreActions(\r\n    actions => actions.simulationTab\r\n  )\r\n\r\n  return (\r\n    <Card>\r\n      <CardBody>\r\n        <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n          Metabolites\r\n        </h4>\r\n        <div style={{ overflowY: 'scroll', height: 255 }}>\r\n          <Table borderless hover>\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>Initial Concentration</th>\r\n                <th>Show in graph</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {metabolites.map(metabolite => (\r\n                <tr key={metabolite.id}>\r\n                  <th>{metabolite.id}</th>\r\n                  <th>\r\n                    <CSlider\r\n                      style={{ width: 200 }}\r\n                      step={icstep}\r\n                      min={icmin}\r\n                      max={icmax}\r\n                      onChange={value => {\r\n                        updateIc({\r\n                          id: metabolite.id,\r\n                          initialConcentration: value,\r\n                        })\r\n                      }}\r\n                    />\r\n                  </th>\r\n                  <th>\r\n                    <CustomSwitch\r\n                      metaboliteId={metabolite.id}\r\n                      toggle={toggleMetabolite}\r\n                    />\r\n                  </th>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </CardBody>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default MetabolitesPanel\r\n","import React from 'react'\r\nimport { Button, Label } from 'reactstrap'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport { useStoreActions } from 'easy-peasy'\r\n\r\nfunction RatelawForm({ ratelaw, reaction, closeModal }) {\r\n  const { setRatelaw } = useStoreActions(actions => actions.simulationTab)\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          k1: 0,\r\n          k2: 0,\r\n        }}\r\n        onSubmit={async (values, actions) => {\r\n          let parameters = values\r\n          let parametersArr = []\r\n          for (let property in parameters) {\r\n            if (parameters.hasOwnProperty(property)) {\r\n              parametersArr.push(parameters[property])\r\n            }\r\n          }\r\n          setRatelaw({\r\n            id: reaction.id,\r\n            ratelaw,\r\n            parameters: parametersArr,\r\n          })\r\n          closeModal()\r\n        }}\r\n        render={({ handleSubmit }) => (\r\n          <Form onSubmit={handleSubmit}>\r\n            {ratelaw === 'mass-action' && reaction.reversible ? (\r\n              <React.Fragment>\r\n                <Label>Forward Parameter (k1):</Label>\r\n                <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n                <Label>Backward Parameter (k2):</Label>\r\n                <Field className=\"form-control\" name=\"k2\" type=\"number\" />\r\n              </React.Fragment>\r\n            ) : (\r\n              <React.Fragment>\r\n                <Label>Parameter (k1):</Label>\r\n                <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n              </React.Fragment>\r\n            )}\r\n            <br />\r\n            <Button type=\"submit\" className=\"btn btn-success\">\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RatelawForm\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CustomInput,\r\n  Table,\r\n  Input,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n} from 'reactstrap'\r\nimport RatelawForm from './RatelawForm'\r\n\r\nfunction ReactionsPanel() {\r\n  const [modal, setModal] = React.useState(false)\r\n  const [reaction, setReaction] = React.useState({})\r\n  const [ratelaw, setRatelaw] = React.useState('')\r\n\r\n  const reactions = useStoreState(\r\n    state => state.modelTab.currentModel.reactions\r\n  )\r\n\r\n  const { switchReaction } = useStoreActions(actions => actions.simulationTab)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Modal\r\n        isOpen={modal}\r\n        toggle={() => {\r\n          setModal(!modal)\r\n        }}\r\n      >\r\n        <ModalHeader>Set Ratelaw</ModalHeader>\r\n        <ModalBody>\r\n          <RatelawForm\r\n            ratelaw={ratelaw}\r\n            reaction={reaction}\r\n            closeModal={() => setModal(false)}\r\n          />\r\n        </ModalBody>\r\n      </Modal>\r\n      <Card>\r\n        <CardBody>\r\n          <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n            Reactions\r\n          </h4>\r\n          <div style={{ overflowY: 'auto', maxHeight: 200 }}>\r\n            <Table borderless hover>\r\n              <thead>\r\n                <tr>\r\n                  <th>Toggle</th>\r\n                  <th>Reaction String</th>\r\n                  <th>Ratelaw</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {reactions.map(reaction => (\r\n                  <tr key={reaction.id}>\r\n                    <th>\r\n                      <CustomInput\r\n                        type=\"switch\"\r\n                        id={reaction.id}\r\n                        onChange={() => {\r\n                          switchReaction(reaction)\r\n                        }}\r\n                      />\r\n                    </th>\r\n\r\n                    <th>\r\n                      {reaction.id}: {reaction.reactionString}\r\n                    </th>\r\n                    <th>\r\n                      <Input\r\n                        onChange={e => {\r\n                          if (!(e.target.value === '')) setModal(!modal)\r\n                          setRatelaw(e.target.value)\r\n                          setReaction(reaction)\r\n                        }}\r\n                        type=\"select\"\r\n                      >\r\n                        <option value=\"\">Set a ratelaw!</option>\r\n                        <option value=\"mass-action\">Mass Action</option>\r\n                      </Input>\r\n                    </th>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </CardBody>\r\n      </Card>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ReactionsPanel\r\n","import React from 'react'\r\nimport SettingsPanel from './SettingsPanel'\r\nimport Plot from './Plot'\r\nimport MetabolitesPanel from './MetabolitesPanel'\r\nimport ReactionsPanel from './ReactionsPanel'\r\nimport GridLayout from 'react-grid-layout'\r\n\r\nfunction SimulationTab() {\r\n  let layout = [\r\n    { i: 'a', x: 0, y: 0, w: 3, h: 7 },\r\n    { i: 'b', x: 3, y: 0, w: 4, h: 7 },\r\n    { i: 'c', x: 7, y: 0, w: 5, h: 15 },\r\n    { i: 'd', x: 0, y: 8, w: 7, h: 6 },\r\n  ]\r\n  return (\r\n    <GridLayout\r\n      isDraggable={false}\r\n      className=\"layout\"\r\n      layout={layout}\r\n      cols={12}\r\n      items={4}\r\n      rowHeight={40}\r\n      width={1500}\r\n      onLayoutChange={() => {}}\r\n      autoSize={false}\r\n    >\r\n      <div key=\"a\">\r\n        <SettingsPanel />\r\n      </div>\r\n      <div key=\"b\">\r\n        <MetabolitesPanel />\r\n      </div>\r\n      <div key=\"c\">\r\n        <Plot />\r\n      </div>\r\n      <div key=\"d\">\r\n        <ReactionsPanel />\r\n      </div>\r\n    </GridLayout>\r\n  )\r\n}\r\n\r\nexport default SimulationTab\r\n","import React from 'react'\r\nimport { HashRouter, Switch, Route } from 'react-router-dom'\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport NavBar from './components/NavBar'\r\nimport ImportSbmlForm from './components/ImportSbmlForm'\r\nimport SavedModels from './components/SavedModels'\r\nimport ModelTab from './components/ModelTab'\r\nimport SimulationTab from './components/SimulationTab/'\r\n\r\ntoast.configure({\r\n  position: toast.POSITION.BOTTOM_RIGHT,\r\n  autoClose: 2000,\r\n})\r\n\r\nfunction App() {\r\n  const [importModal, setImportModal] = React.useState(false)\r\n  const [savedModal, setSavedModal] = React.useState(false)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <HashRouter>\r\n        <NavBar\r\n          importModel={() => setImportModal(!importModal)}\r\n          savedModels={() => setSavedModal(!importModal)}\r\n        />\r\n        <Modal isOpen={importModal} toggle={() => setImportModal(!importModal)}>\r\n          <ModalHeader toggle={() => setImportModal(!importModal)}>\r\n            Import an existing SBML Model\r\n          </ModalHeader>\r\n          <ModalBody>\r\n            <ImportSbmlForm closeModal={() => setImportModal(!importModal)} />\r\n          </ModalBody>\r\n        </Modal>\r\n        <Modal isOpen={savedModal} toggle={() => setSavedModal(!savedModal)}>\r\n          <ModalHeader toggle={() => setSavedModal(!savedModal)}>\r\n            Saved Models\r\n          </ModalHeader>\r\n          <ModalBody>\r\n            <SavedModels />\r\n          </ModalBody>\r\n        </Modal>\r\n        <Switch>\r\n          <Route path=\"/simulation\" component={SimulationTab} />\r\n          <Route path=\"/\" component={ModelTab} />\r\n        </Switch>\r\n      </HashRouter>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { StoreProvider } from 'easy-peasy'\nimport { store } from './store'\nimport { Helmet } from 'react-helmet'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './index.scss'\n\nReactDOM.render(\n  <StoreProvider store={store}>\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>ODE-APP</title>\n    </Helmet>\n    <App />\n  </StoreProvider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}