(window["webpackJsonpode-app-client"]=window["webpackJsonpode-app-client"]||[]).push([[0],{296:function(e,t,a){e.exports=a(651)},459:function(e,t,a){},460:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98DBg8SMBgGJhQAAAJcSURBVDjLrZO/alRREMa/mXPOvXf/BEmybhQiBDXamM7HECxU1AgW1mIlIgiClU+ghaSLElnBPICNL2Fh4b/KsKzsZt299557z5mxiFkT0UqnnOI33/fNDPCPRb83Tj162+W0eYNcetW65FzTMR/JzLt2wq/aCW++uLLy9Y+Akw/fELG5QC59SjZdbrba6LQsjrUtjs85NB2jjtqvRW+Pvbx+dvFEBAC7D1CJF4hND2wz12hpKzVYaBhaXUyxttTQo02DvJbu+4Hf+jyq1gH0AIABYOXe9lGIPAVxRmw0MUwtRzTfsDg5n+D0QkIr8wmd6WR6tpOaxPKT673PyzOA+PyGSlwGoGTdzFZqCJllZI7hmGAZlDlWx9QZe7k1A2isr0LCnpUYoaoQBfJasDMJ6E8Cdn3EsIjoTwKmVcS0itdmGWjt16QqwY1IkAAfFXkt+FZEfBp6AMBi08AHxcdhRTuTgLGX1RlAfM5gC60KiHEglyKvUgyme6pGpaDhCEGAQR4wmAaUQfBLQfDvJB+dj0mmlDRIfI6CGAAQVTEqAgwToih8VAyLiFhOPx5cYy/mu+f3w7NHuoAKCm2jDA6GCY4JtShCXWkYD0hr3zugoN5UiXfDbr8roVKtPZm5RXBVgoxDtA6VCqQqNYx2SKpyRMZsHLrEpSsPL0s5eamhNuRSNa15cNYmTpsAMaTKVfIxaazBSXbz6/P7m4cukYzbJpuuq+qTWHzvxOkQYAuinzOIiZNsRDa9I8DWX5+pe+nBstb+lkq8plWxCoDIpR+ITY9sutHffvwF/7N+AOa9Ka0q3oiBAAAAAElFTkSuQmCC"},461:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADkSURBVDhPlZGxDgFRFER3JXQ+gEKiEBIqrdYHqHW+jc4HSETtV4iGRhS79z53NvNYPJt9k0yx9s7MiU1UtWOeRHoMO+d6KJiJqstFskhrrrpKrKVhD0f8gKI6LsIiN8umKEiNYho6rLKtL4sCCBQicqhDwfX7KwyRYhgKhJw5t/gogEixDwW8uf7ALWNvkaIfCpZt6/OfdS9S7EL/BdevwXUvUnS/w974Wn/XvUixLVNw/VS57kWKdnkZNo3wjmfVwqFRrLkMn2uHIRybW37diAZRBRApNrZ+iQ5DpGjiq/wvSJInLsNx8D4f8OUAAAAASUVORK5CYII="},589:function(e,t,a){},647:function(e,t,a){},650:function(e,t,a){},651:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(12),c=a.n(l),o=a(10),i=a(74),m=a(62),s=a.n(m),u=a(42),d=a.n(u);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var p={modelMetadata:{},importSbml:Object(o.e)(function(e,t){var a=new FormData;return a.append("file",t,t.name),s()({method:"post",url:"".concat("/","api/uploadSbml"),data:a}).then(function(t){var a=JSON.parse(t.data);e.modelTab.setCurrentModel(a)}).then(function(){return e.initSimulation(),{error:!1}}).catch(function(e){return{message:"Something went wrong.",error:!0}})}),getModel:Object(o.e)(function(e,t){return s()({method:"get",url:"".concat("/","api/model/get/").concat(t)}).then(function(t){var a=t.data.jsonModel;e.modelTab.setCurrentModel(a),e.setModelMetadata({name:a.name,id:a.id,sbmlVersion:a.sbmlVersion,sbmlLevel:a.sbmlLevel})}).then(function(){return e.initSimulation(),{error:!1,message:"Successfully retrieved model."}}).catch(function(e){return console.log(e),{error:!0,message:"Something went wrong."}})}),initSimulation:Object(o.b)(function(e){e.simulationTab.reactions=e.modelTab.currentModel.reactions.map(function(e){return b({},e,{ratelaw:"",parameters:[],checked:!1})}),e.simulationTab.metabolitesFromModel=e.modelTab.currentModel.metabolites.map(function(e){return b({},e,{initialConcentration:0})})}),setModelMetadata:Object(o.b)(function(e,t){e.modelMetadata={name:t.name,id:t.id,sbmlVersion:t.sbmlVersion,sbmlLevel:t.sbmlLevel}}),modelTab:{currentModel:{metabolites:[],reactions:[],compartments:[]},saveModel:Object(o.e)(function(e,t,a){var n=(0,a.getStoreState)();return s()({method:"post",url:"".concat("/","api/model/add"),data:n.modelTab.currentModel}).then(function(e){return{message:"Successfully saved.",error:!1}}).catch(function(e){return{message:"Something went wrong.",error:!0}})}),setCurrentModel:Object(o.b)(function(e,t){e.currentModel=t})},simulationTab:{icmin:0,icmax:100,icstep:Object(o.c)(function(e){return(e.icmax-e.icmin)/100}),reactions:[],metabolitesFromModel:[],metabolites:[],resultData:[],graphData:Object(o.c)(function(e){return e.resultData.filter(function(e){return!!e.checked})}),simulate:Object(o.e)(function(e,t,a){var n=(0,a.getStoreState)(),r=[];n.simulationTab.reactions.forEach(function(e){if(!0===e.checked){if(""===e.ratelaw)throw new Error("Ratelaw found empty for reaction: "+e.id);r.push(e)}});var l={time:t.time,dataPoints:t.dataPoints,reactions:r,metabolites:n.simulationTab.metabolites};return s()({method:"post",url:"".concat("/","api/simulation"),data:l}).then(function(t){var a=JSON.parse(t.data).concentrationData.map(function(e){return b({},e,{checked:!0})});return e.updateResult(a),{error:!1,message:"Simulation successfull."}}).catch(function(e){return{message:"Something went wrong.",error:!0}})}),switchReaction:Object(o.e)(function(e,t,a){var n=(0,a.getStoreState)();n.simulationTab.reactions=n.simulationTab.reactions.map(function(e){return e.id===t.id?b({},e,{checked:!e.checked}):e}),e.updateMetabolites()}),setRatelaw:Object(o.b)(function(e,t){e.reactions=e.reactions.map(function(e){return t.id===e.id?"custom-rate"===t.ratelaw?b({},e,{ratelaw:t.ratelaw,rate:t.rate}):b({},e,{ratelaw:t.ratelaw,parameters:t.parameters}):e})}),toggleMetabolite:Object(o.b)(function(e,t){e.resultData=e.resultData.map(function(e){return e.name===t?b({},e,{checked:!e.checked}):e})}),updateResult:Object(o.b)(function(e,t){e.resultData=t}),setIcmin:Object(o.b)(function(e,t){e.icmin=t}),setIcmax:Object(o.b)(function(e,t){e.icmax=t}),updateIc:Object(o.b)(function(e,t){e.metabolites.forEach(function(e){e.id===t.id&&(e.initialConcentration=t.initialConcentration)}),e.metabolitesFromModel.forEach(function(e){e.id===t.id&&(e.initialConcentration=t.initialConcentration)})}),updateMetabolites:Object(o.b)(function(e,t){e.metabolites=[],e.reactions.map(function(t){return!!t.checked&&(t.reactants.map(function(t){return e.metabolitesFromModel.map(function(a){return t.id===a.id&&(!d.a.includes(e.metabolites,a)&&e.metabolites.push(a))})}),t.products.map(function(t){return e.metabolitesFromModel.map(function(a){return t.id===a.id&&(!d.a.includes(e.metabolites,a)&&e.metabolites.push(a))})}))})})}},h=Object(o.d)(p),E=a(277),g=a(22),v=a(293),w=a(51),y=a(676),A=a(668),x=a(669),N=a(26),O=(a(322),a(652)),S=a(653),k=a(654),j=a(655),C=a(656),M=a(657),D=a(658),R=a(659),P=a(660),I=a(661),W=a(662);var T=function(e){var t=r.a.useState(!1),a=Object(g.a)(t,2),n=a[0],l=a[1];return r.a.createElement(O.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(S.a,{href:"/"},"ODE App"),r.a.createElement(k.a,{onClick:function(){l(function(e){return!e})}}),r.a.createElement(j.a,{isOpen:n,navbar:!0},r.a.createElement(C.a,{className:"ml-auto",navbar:!0},r.a.createElement(M.a,null,r.a.createElement(D.a,{href:"/#/model"},"Model")),r.a.createElement(M.a,null,r.a.createElement(D.a,{href:"/#/simulation"},"Simulation"))),r.a.createElement(C.a,{className:"ml-auto",navbar:!0},r.a.createElement(R.a,{nav:!0,inNavbar:!0},r.a.createElement(P.a,{nav:!0,caret:!0},"Options"),r.a.createElement(I.a,{right:!0},r.a.createElement(W.a,{onClick:e.importModel},"Import Model"),r.a.createElement(W.a,{onClick:e.savedModels},"Saved Models"))))))},F=a(24),H=a.n(F),B=a(38),L=a(16),V=a(663),Y=a(664),K=a(665),U=a(280);var q=function(e){var t=e.closeModal,a=Object(o.f)(function(e){return e.importSbml});return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.c,{initialValues:{file:""},onSubmit:function(){var e=Object(B.a)(H.a.mark(function e(n,r){var l;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.file){e.next=5;break}return e.next=3,a(n.file);case 3:(l=e.sent).error?N.a.error(l.message):t();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){return r.a.createElement(V.a,{onSubmit:e.handleSubmit},r.a.createElement(Y.a,null,r.a.createElement("input",{required:!0,type:"file",name:"file",placeholder:"Upload",onChange:function(t){e.setFieldValue("file",t.currentTarget.files[0])}}),r.a.createElement(K.a,{color:"muted"},"Please upload a .sbml or .xml file which is formatted atleast in level 2 SBML for kinetic (ODE) models.")),r.a.createElement(U.a,{color:"primary",type:"submit"},"Submit"))}}))},Q=a(284),z=a(666),J=a(667),G="/";var Z=function(){var e=r.a.useState([]),t=Object(g.a)(e,2),a=t[0],n=t[1],l=Object(o.f)(function(e){return e.getModel});return r.a.useEffect(function(){s()({method:"get",url:"".concat(G,"api/model/get/all")}).then(function(e){return n(e.data)}).catch(function(e){return console.error(e)})},[]),a?r.a.createElement(z.a,{flush:!0},a.map(function(e){return r.a.createElement(J.a,{tag:"button",action:!0,onClick:Object(B.a)(H.a.mark(function t(){var a;return H.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e.id);case 2:(a=t.sent).error?N.a.error(a.message):N.a.success(a.message);case 4:case"end":return t.stop()}},t)})),key:e.id},e.name," -"," ",Object(Q.format)(new Date(e.createdAt),"D MMMM YYYY - hh:mm:ss A"))})):r.a.createElement("div",null)},X=a(39),_=a(285),$=a(286),ee=a(295),te=a(287),ae=a(294),ne=a(288),re=a.n(ne),le=a(675),ce=a(169),oe=a(119),ie=a(120);var me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"circle-icon blue"}),"- Metabolite Nodes"),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"circle-icon red"}),"- Reaction Nodes"),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"circle-icon green"}),"- Reactant Edge"),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"circle-icon yellow"}),"- Product Edge"),r.a.createElement("div",{className:"flex"},"--\x3e - Reversible reactions"))},se=(a(459),function(e){function t(){var e,a;Object(_.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={nodes:[],edges:[],compartments:[],currentCompartment:"all",dropdown:!1,canvasWidth:0},a.toggle=function(){a.setState({dropdown:!a.state.dropdown})},a.selectCompartment=function(e){a.setState({currentCompartment:e})},a.gen=function(){var e=a.props,t=e.reactions,n=e.metabolites,r=e.compartments,l=a.state.currentCompartment;a.setState({compartments:r});try{if("all"===l){var c=a.generateReactionNodes(t),o=n.reduce(function(e,t){return e.push({label:t.id}),e},[]),i=d.a.concat(c,o),m=a.generateReactionEdges(t,i);a.setState({nodes:i,edges:m})}else{var s=t.filter(function(e){return!(!d.a.includes(e.compartments,l)||1!==e.compartments.length)}),u=a.generateReactionNodes(s),f=n.reduce(function(e,t){return t.compartment===l&&e.push({label:t.id}),e},[]),b=d.a.concat(u,f),p=a.generateReactionEdges(s,b);a.setState({nodes:b,edges:p})}}catch(h){}},a.generateReactionNodes=function(e){return e.map(function(e){return{label:e.id,style:"reactionNode"}})},a.findNode=function(e,t){var a;return t.filter(function(t,n){return t.label===e.label&&(a=n)}),a},a.generateReactionEdges=function(e,t){var n=[];return e.map(function(e){return e.reactants.map(function(r){return e.reversible?n.push({source:t[a.findNode({label:r.id},t)],target:t[a.findNode({label:e.id},t)],style:"reversibleReactantEdge"}):n.push({source:t[a.findNode({label:r.id},t)],target:t[a.findNode({label:e.id},t)],style:"reactantEdge"})}),e.products.map(function(r){return e.reversible?n.push({source:t[a.findNode({label:e.id},t)],target:t[a.findNode({label:r.id},t)],style:"reversibleProductEdge"}):n.push({source:t[a.findNode({label:e.id},t)],target:t[a.findNode({label:r.id},t)],style:"productEdge"})})}),n},a}return Object(ae.a)(t,e),Object($.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({compartments:this.props.compartments}),this.graph=new re.a(document.getElementById("graph"),{styles:{background:{color:"rgb(255, 255, 255)"},node:{minSize:6,maxSize:16,color:"rgb(47, 109, 206)",texture:a(460),label:{color:"rgb(0, 0, 0)",hideSize:16}},edge:{width:1,color:"rgb(50, 50, 50)",arrow:{minSize:1,maxSize:16,aspect:1,texture:a(461),hideSize:1},type:"line"},reactionNode:{color:"rgb(200, 0, 0)",label:{hideSize:16}},reactantEdge:{color:"rgb(89, 249, 2)"},productEdge:{color:"rgb(255, 246, 0)"},reversibleReactantEdge:{color:"rgb(89, 249, 2)",type:"dashed"},reversibleProductEdge:{color:"rgb(255, 246, 0)",type:"dashed"}},onChangeViewport:function(e){},onLoad:function(){},getNodesCount:function(){},getEdgesCount:function(){},onDrag:function(e){},onZoom:function(e){},onClick:function(){return!1},onDblClick:function(){},passiveEvts:!0}),this.gen(),this.graph.set(this.state.nodes,this.state.edges,"force").then(function(){e.graph.draw()})}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.reactions===this.props.reactions&&e.metabolites===this.props.metabolites||this.setState({currentCompartment:"all"}),e.reactions===this.props.reactions&&e.metabolites===this.props.metabolites&&t.currentCompartment===this.state.currentCompartment||this.gen(),t.nodes===this.state.nodes&&t.edges===this.state.edges||this.graph.set(this.state.nodes,this.state.edges,"force").then(function(){a.graph.draw()}),e.width!==this.props.width&&this.setState({canvasWidth:this.props.width})}},{key:"componentWillUnmount",value:function(){this.graph.remove()}},{key:"render",value:function(){var e=this,t=this.state,a=t.compartments,n=t.canvasWidth;return r.a.createElement("div",null,r.a.createElement("h4",{className:"text-muted"},"Graph"," ",r.a.createElement(oe.Icon,{icon:ie.infoCircle,id:"graph-legend-info"}),r.a.createElement(le.a,{placement:"right",target:"graph-legend-info"},r.a.createElement(me,null))),r.a.createElement(ce.a,{isOpen:this.state.dropdown,toggle:this.toggle},r.a.createElement(P.a,{color:"success"},"Compartments"),r.a.createElement(I.a,null,r.a.createElement(W.a,{onClick:function(){e.selectCompartment("all")}},"All"),a.map(function(t){return r.a.createElement(W.a,{key:t.id,onClick:function(){e.selectCompartment(t.id)}},t.name)}))),r.a.createElement("br",null),r.a.createElement("canvas",{id:"graph",width:n,height:"550",className:"nonDraggableArea"}))}}]),t}(r.a.Component)),ue=Object(X.WidthProvider)(se);var de=function(e){return e.reactions?r.a.createElement("div",null,r.a.createElement("h4",{className:"text-muted"},"Reactions"),r.a.createElement(z.a,{flush:!0,style:{height:"250px",overflowY:"auto"},className:"nonDraggableArea"},e.reactions.map(function(t){return r.a.createElement(J.a,{key:t.id,tag:"button",action:!0,onClick:function(){e.setInfo(t),e.setType("reaction")}},t.id," - ",t.name)}))):r.a.createElement("div",null,"No data")};var fe=function(e){return e.metabolites?r.a.createElement("div",null,r.a.createElement("h4",{className:"text-muted"},"Metabolites"),r.a.createElement(z.a,{flush:!0,style:{height:"250px",overflowY:"auto"}},e.metabolites.map(function(t){return r.a.createElement(J.a,{key:t.id,tag:"button",action:!0,onClick:function(){e.setInfo(t),e.setType("metabolite")}},t.id," - ",t.name)}))):r.a.createElement("div",null,"No data")};function be(e,t){return t?e.map(function(a,n){return n===e.length-1?"".concat(a[t]):"".concat(a[t],", ")}):e.map(function(t,a){return a===e.length-1?"".concat(t):"".concat(t,", ")})}var pe=function(e){return"metabolite"===e.type?r.a.createElement("div",null,r.a.createElement("dl",{className:"row nonDraggableArea"},r.a.createElement("dt",{className:"col-sm-5"},"Metabolite ID"),r.a.createElement("dd",{className:"col-sm-7"},e.data.id),r.a.createElement("dt",{className:"col-sm-5"},"Metabolite Name"),r.a.createElement("dd",{className:"col-sm-7"},e.data.name),r.a.createElement("dt",{className:"col-sm-5"},"Compartment"),r.a.createElement("dd",{className:"col-sm-7"},e.data.compartment),r.a.createElement("dt",{className:"col-sm-5"},"Initial Concentration"),r.a.createElement("dd",{className:"col-sm-7"},e.data.initialConcentration))):"reaction"===e.type?r.a.createElement("div",null,r.a.createElement("dl",{className:"row nonDraggableArea"},r.a.createElement("dt",{className:"col-sm-4"},"Reaction ID"),r.a.createElement("dd",{className:"col-sm-8"},e.data.id),r.a.createElement("dt",{className:"col-sm-4"},"Reaction Name"),r.a.createElement("dd",{className:"col-sm-8"},e.data.name),r.a.createElement("dt",{className:"col-sm-4"},"Reversible"),r.a.createElement("dd",{className:"col-sm-8"},String(e.data.reversible)),r.a.createElement("dt",{className:"col-sm-4"},"Reaction"),r.a.createElement("dd",{className:"col-sm-8"},e.data.reactionString),r.a.createElement("dt",{className:"col-sm-4"},"Modifiers"),r.a.createElement("dd",{className:"col-sm-8"},be(e.data.modifiers)))):r.a.createElement(r.a.Fragment,null)},he=Object(X.WidthProvider)(X.Responsive);var Ee=function(){var e=r.a.useState(""),t=Object(g.a)(e,2),a=t[0],n=t[1],l=r.a.useState({}),c=Object(g.a)(l,2),i=c[0],m=c[1],s=r.a.useState(!1),u=Object(g.a)(s,2),d=u[0],f=u[1],b=Object(o.g)(function(e){return e.modelTab.currentModel}),p=b.reactions,h=b.metabolites,E=b.name,v=b.compartments,w=Object(o.f)(function(e){return e.modelTab.saveModel});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{isOpen:d,toggle:function(){f(!d)}},r.a.createElement(A.a,{toggle:function(){f(!d)}},"Save your SBML Model"),r.a.createElement(x.a,null,"Are you sure?",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(U.a,{color:"primary",onClick:Object(B.a)(H.a.mark(function e(){var t;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(t=e.sent).error?N.a.error(t.message):N.a.success(t.message),f(!d);case 5:case"end":return e.stop()}},e)}))},"Yes")," ",r.a.createElement(U.a,{color:"danger",onClick:function(){return f(!d)}},"Cancel"))),r.a.createElement(he,{className:"layout",layouts:{lg:[{i:"graph",x:0,y:0,w:6,h:14,minW:5,minH:14,static:!0},{i:"reactions",x:6,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:9,y:0,w:3,h:7,minW:4,minH:7},{i:"info",x:6,y:7,w:6,h:5,minW:7,minH:7}]},breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:40,items:4,onLayoutChange:function(){},draggableCancel:".nonDraggableArea"},r.a.createElement("div",{key:"graph"},r.a.createElement(ue,{reactions:p,metabolites:h,compartments:v})),r.a.createElement("div",{key:"reactions"},r.a.createElement(de,{reactions:p,setInfo:m,setType:n})),r.a.createElement("div",{key:"metabolites"},r.a.createElement(fe,{metabolites:h,setInfo:m,setType:n})),r.a.createElement("div",{key:"info"},r.a.createElement(pe,{type:a,data:i}),r.a.createElement(U.a,{style:{float:"right"},outline:!0,color:"success",onClick:function(){return f(!d)},disabled:!E},"Save Model"))))},ge=a(670),ve=a(671),we=a(122),ye=a(289),Ae=a.n(ye);a(589);function xe(e){var t,a=[];return a.push(e.className),e.curved&&a.push("curved-button"),t=e.loading?r.a.createElement(Ae.a,{type:"bars",color:e.color,height:"30px",width:"30px",className:"button-loading-icon"}):e.children,r.a.createElement("button",{type:e.type,className:a.join(" "),disabled:e.loading,onClick:e.onClick},t)}xe.defaultProps={loading:!1,curved:!1,type:"button",color:"white"};var Ne=xe,Oe=we.object().shape({time:we.number().min(2).max(1e3).required("Required"),dataPoints:we.number().min(2).max(5e3).required("Required")});var Se=function(){var e=Object(o.f)(function(e){return e.simulationTab}),t=e.simulate,a=e.setIcmin,n=e.setIcmax,l=Object(o.g)(function(e){return e.simulationTab}),c=l.icmin,i=l.icmax;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"text-muted",style:{marginBottom:20}},"Settings"),r.a.createElement(L.c,{className:"nonDraggableArea",initialValues:{time:10,dataPoints:500,icmin:c,icmax:i},validationSchema:Oe,onSubmit:function(){var e=Object(B.a)(H.a.mark(function e(a,n){var r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({time:a.time,dataPoints:a.dataPoints});case 3:(r=e.sent).error?N.a.error(r.message):N.a.success(r.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N.a.error(e.t0.message);case 10:n.setSubmitting(!1);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){var t=e.handleSubmit,l=e.isSubmitting,c=e.errors,o=e.setFieldValue;return r.a.createElement(V.a,{onSubmit:t},r.a.createElement(Y.a,{row:!0},r.a.createElement(ge.a,{for:"time",sm:5},"Time:"),r.a.createElement(ve.a,{sm:7},r.a.createElement(L.a,{className:"form-control ".concat(c.time?"is-invalid":""),type:"number",name:"time"}))),r.a.createElement(Y.a,{row:!0},r.a.createElement(ge.a,{for:"dataPoints",sm:5},"Data Points:"),r.a.createElement(ve.a,{sm:7},r.a.createElement(L.a,{className:"form-control ".concat(c.dataPoints?"is-invalid":""),type:"number",name:"dataPoints"}))),r.a.createElement(Y.a,{row:!0},r.a.createElement(ge.a,{for:"icmin",sm:5},"IC Min:"),r.a.createElement(ve.a,{sm:7},r.a.createElement(L.a,{className:"form-control",type:"number",name:"icmin",onChange:function(e){o("icmin",e.target.value),a(Number(e.target.value))}}))),r.a.createElement(Y.a,{row:!0},r.a.createElement(ge.a,{for:"icmax",sm:5},"IC Max:"),r.a.createElement(ve.a,{sm:7},r.a.createElement(L.a,{className:"form-control",type:"number",name:"icmax",onChange:function(e){o("icmax",e.target.value),n(Number(e.target.value))}}))),r.a.createElement(Ne,{type:"submit",loading:l,className:"btn btn-success"},"Run"))}}))},ke=a(290),je=a.n(ke);function Ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ce(a,!0).forEach(function(t){Object(i.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var De=Object(X.WidthProvider)(function(e){var t,a=Object(o.g)(function(e){return e.simulationTab}),n=Object(o.g)(function(e){return e.modelMetadata});return r.a.useEffect(function(){var e=[];a.reactions.forEach(function(t){!0===t.checked&&(""===t.ratelaw?e.push(Me({},t,{ratelaw:a.globalRatelaw})):e.push(t))});var t=Me({},n,{reactions:e,metabolites:a.metabolites}),r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),l=document.getElementById("exportAnchorElement");l.setAttribute("href",r),l.setAttribute("download","model.json")}),r.a.useEffect(function(){t=35*e.width/100},[e.width]),a.graphData?r.a.createElement("div",null,r.a.createElement(je.a,{options:{chart:{id:"apexchart-example"},xaxis:{type:"numeric",tickAmount:10}},series:a.graphData,type:"line",width:t,height:600}),r.a.createElement("a",{className:"btn btn-dark",style:{float:"right"},id:"exportAnchorElement",href:"/"},"Export Data")):r.a.createElement("div",null)}),Re=a(673),Pe=a(172),Ie=(a(646),a(672));var We=function(e){var t=e.metaboliteId,a=e.toggle,n=r.a.useState(!0),l=Object(g.a)(n,2),c=l[0],o=l[1];return r.a.createElement(Ie.a,{type:"switch",id:t,onChange:function(e){o(function(e){return!e}),a(t)},checked:c})},Te=Pe.a.createSliderWithTooltip(Pe.a);var Fe=function(){var e=Object(o.g)(function(e){return e.simulationTab}),t=e.metabolites,a=e.icstep,n=e.icmin,l=e.icmax,c=Object(o.f)(function(e){return e.simulationTab}),i=c.toggleMetabolite,m=c.updateIc;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",{className:"text-muted",style:{marginBottom:20}},"Metabolites"),r.a.createElement("div",{style:{overflowY:"auto",height:"90%"},className:"nonDraggableArea shadow-inner"},r.a.createElement(Re.a,{borderless:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Initial Concentration"),r.a.createElement("th",null,"Show in graph"))),r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,e.id),r.a.createElement("th",null,r.a.createElement(Te,{style:{width:200},step:a,min:n,max:l,onChange:function(t){m({id:e.id,initialConcentration:t})}})),r.a.createElement("th",null,r.a.createElement(We,{metaboliteId:e.id,toggle:i})))})))))},He=a(674);var Be=function(e){var t,a=e.ratelaw,n=e.reaction,l=e.closeModal,c=Object(o.f)(function(e){return e.simulationTab}).setRatelaw;switch(a){case"mass-action":t=n.reversible?r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null,"Forward Parameter (k1):"),r.a.createElement(L.a,{className:"form-control",name:"k1",type:"number"}),r.a.createElement(ge.a,null,"Backward Parameter (k2):"),r.a.createElement(L.a,{className:"form-control",name:"k2",type:"number"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null,"Parameter (k1):"),r.a.createElement(L.a,{className:"form-control",name:"k1",type:"number"}));break;case"michaelis-menten":t=n.reversible?r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null,"Vfmax:"),r.a.createElement(L.a,{className:"form-control",name:"k1",type:"number"}),r.a.createElement(ge.a,null,"Vrmax:"),r.a.createElement(L.a,{className:"form-control",name:"k2",type:"number"}),r.a.createElement(ge.a,null,"KSm:"),r.a.createElement(L.a,{className:"form-control",name:"k3",type:"number"}),r.a.createElement(ge.a,null,"KPm:"),r.a.createElement(L.a,{className:"form-control",name:"k4",type:"number"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null,"Vmax:"),r.a.createElement(L.a,{className:"form-control",name:"k1",type:"number"}),r.a.createElement(ge.a,null,"Km:"),r.a.createElement(L.a,{className:"form-control",name:"k2",type:"number"}));break;case"hill-equation":t=r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null,"Vmax:"),r.a.createElement(L.a,{className:"form-control",name:"k1",type:"number"}),r.a.createElement(ge.a,null,"K",r.a.createElement("sub",null,"0.5"),":"),r.a.createElement(L.a,{className:"form-control",name:"k2",type:"number"}),r.a.createElement(ge.a,null,"Hill coefficient:"),r.a.createElement(L.a,{className:"form-control",name:"k3",type:"number"}));break;case"custom-rate":t=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Metabolites available:"," ",be(d.a.concat(n.reactants,n.products),"id")),r.a.createElement(ge.a,null,"Custom Rate:"),r.a.createElement(L.a,{className:"form-control",name:"rate",type:"text"}),r.a.createElement("p",null,"For example: 0.5 * some_metabolite"))}return r.a.createElement("div",null,r.a.createElement(L.c,{initialValues:{k1:0,k2:0,k3:0,k4:0,rate:""},onSubmit:function(){var e=Object(B.a)(H.a.mark(function e(t,r){var o,i,m;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("custom-rate"===a)c({id:n.id,ratelaw:a,rate:t.rate});else{for(m in i=[],o=t)o.hasOwnProperty(m)&&i.push(o[m]);c({id:n.id,ratelaw:a,parameters:i})}l();case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),render:function(e){var a=e.handleSubmit;return r.a.createElement(L.b,{onSubmit:a},t,r.a.createElement("br",null),r.a.createElement(U.a,{type:"submit",className:"btn btn-success"},"Submit"))}}))};var Le=function(e){var t=e.reaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex"},"Name: ",t.name),r.a.createElement("div",{className:"flex"},"ID: ",t.id),r.a.createElement("div",{className:"flex"},"Reversible: ",String(t.reversible)),r.a.createElement("div",{className:"flex"},"Modifiers: ",be(t.modifiers)))};var Ve=function(){var e=r.a.useState(!1),t=Object(g.a)(e,2),a=t[0],n=t[1],l=r.a.useState({}),c=Object(g.a)(l,2),i=c[0],m=c[1],s=r.a.useState(""),u=Object(g.a)(s,2),d=u[0],f=u[1],b=Object(o.g)(function(e){return e.modelTab.currentModel.reactions}),p=Object(o.f)(function(e){return e.simulationTab}).switchReaction;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{isOpen:a,toggle:function(){n(!a)},className:"nonDraggableArea"},r.a.createElement(A.a,null,"Set Ratelaw"),r.a.createElement(x.a,null,r.a.createElement(Be,{ratelaw:d,reaction:i,closeModal:function(){return n(!1)}}))),r.a.createElement("div",{style:{height:"90%"}},r.a.createElement("h4",{className:"text-muted",style:{marginBottom:20}},"Reactions"),r.a.createElement("div",{style:{overflowY:"auto",height:"85%"},className:"shadow-inner nonDraggableArea"},r.a.createElement(Re.a,{borderless:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Toggle"),r.a.createElement("th",null,"Reaction String"),r.a.createElement("th",null,"Ratelaw"))),r.a.createElement("tbody",null,b.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,r.a.createElement(Ie.a,{type:"switch",id:e.id,onChange:function(){p(e)}})),r.a.createElement("th",null,e.id,": ",e.reactionString," ",r.a.createElement(oe.Icon,{icon:ie.infoCircle,id:"".concat(e.id,"-info")}),r.a.createElement(le.a,{placement:"right",target:"".concat(e.id,"-info")},r.a.createElement(Le,{reaction:e}))),r.a.createElement("th",null,r.a.createElement(He.a,{onChange:function(t){""!==t.target.value&&n(!a),f(t.target.value),m(e)},type:"select"},r.a.createElement("option",{value:""},"Set a ratelaw!"),r.a.createElement("option",{value:"mass-action"},"Mass Action"),0===e.modifiers.length||e.reactants.length>1||e.products.length>1?r.a.createElement(r.a.Fragment,null):r.a.createElement("option",{value:"michaelis-menten"},"Michaelis Menten"),0===e.modifiers.length||e.reactants.length>1||e.products.length>1||e.reversible?r.a.createElement(r.a.Fragment,null):r.a.createElement("option",{value:"hill-equation"},"Hill Kinetics Equation"),r.a.createElement("option",{value:"custom-rate"},"Custom Rate"))))}))))))},Ye=(a(647),Object(X.WidthProvider)(X.Responsive));var Ke=function(){return r.a.createElement(Ye,{className:"layout",layouts:{lg:[{i:"settings",x:0,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:3,y:0,w:4,h:7,minW:4,minH:7},{i:"plot",x:7,y:0,w:5,h:14,minW:5,minH:14},{i:"reactions",x:0,y:8,w:7,h:6,minW:7,minH:7}],md:[{i:"settings",x:0,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:3,y:0,w:4,h:7,minW:4,minH:7},{i:"plot",x:7,y:0,w:5,h:15,minW:5,minH:14},{i:"reactions",x:0,y:8,w:7,h:6,minW:7,minH:7}],sm:[{i:"settings",x:0,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:3,y:0,w:4,h:7,minW:4,minH:7},{i:"plot",x:7,y:0,w:5,h:15,minW:5,minH:14},{i:"reactions",x:0,y:8,w:7,h:6,minW:7,minH:7}],xs:[{i:"settings",x:0,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:3,y:0,w:4,h:7,minW:4,minH:7},{i:"plot",x:7,y:0,w:5,h:15,minW:5,minH:14},{i:"reactions",x:0,y:8,w:7,h:6,minW:7,minH:7}],xss:[{i:"settings",x:0,y:0,w:3,h:7,minW:3,minH:7},{i:"metabolites",x:3,y:0,w:4,h:7,minW:4,minH:7},{i:"plot",x:7,y:0,w:5,h:15,minW:5,minH:14},{i:"reactions",x:0,y:8,w:7,h:6,minW:7,minH:7}]},breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:40,items:4,onLayoutChange:function(){},draggableCancel:".nonDraggableArea"},r.a.createElement("div",{key:"settings"},r.a.createElement(Se,null)),r.a.createElement("div",{key:"metabolites"},r.a.createElement(Fe,null)),r.a.createElement("div",{key:"plot"},r.a.createElement(De,null)),r.a.createElement("div",{key:"reactions"},r.a.createElement(Ve,null)))};N.a.configure({position:N.a.POSITION.BOTTOM_RIGHT,autoClose:2e3});var Ue=function(){var e=r.a.useState(!1),t=Object(g.a)(e,2),a=t[0],n=t[1],l=r.a.useState(!1),c=Object(g.a)(l,2),o=c[0],i=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(T,{importModel:function(){return n(!a)},savedModels:function(){return i(!a)}}),r.a.createElement(y.a,{isOpen:a,toggle:function(){return n(!a)}},r.a.createElement(A.a,{toggle:function(){return n(!a)}},"Import an existing SBML Model"),r.a.createElement(x.a,null,r.a.createElement(q,{closeModal:function(){return n(!a)}}))),r.a.createElement(y.a,{isOpen:o,toggle:function(){return i(!o)}},r.a.createElement(A.a,{toggle:function(){return i(!o)}},"Saved Models"),r.a.createElement(x.a,null,r.a.createElement(Z,null))),r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/simulation",component:Ke}),r.a.createElement(w.a,{path:"/",component:Ee}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(649),a(650);c.a.render(r.a.createElement(o.a,{store:h},r.a.createElement(E.Helmet,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,"ODE-APP")),r.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[296,1,2]]]);
//# sourceMappingURL=main.61d7355b.chunk.js.map