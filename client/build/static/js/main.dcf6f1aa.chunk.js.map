{"version":3,"sources":["assets/node.png","assets/arrow.png","store/index.js","components/NavBar/index.js","components/ImportSbmlForm/index.js","components/SavedModels/index.js","components/ModelTab/Graph/GraphLegend.js","components/ModelTab/Graph/index.js","components/ModelTab/ReactionsList/index.js","components/ModelTab/SpeciesList/index.js","utils/index.js","components/ModelTab/InfoPanel/index.js","components/ModelTab/index.js","components/Button/index.js","components/SimulationTab/SettingsPanel/index.js","components/SimulationTab/Plot/index.js","components/SimulationTab/SpeciesPanel/CustomSwitch.js","components/SimulationTab/SpeciesPanel/index.js","components/SimulationTab/ReactionsPanel/RatelawForm.js","components/SimulationTab/ReactionsPanel/ReactionInfo.js","components/SimulationTab/ReactionsPanel/index.js","components/SimulationTab/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","model","modelMetadata","importSbml","thunk","actions","file","formData","FormData","append","name","axios","method","url","process","data","then","res","json","JSON","parse","modelTab","setCurrentModel","initSimulation","error","err","message","getModel","payload","jsonModel","setModelMetadata","id","sbmlVersion","sbmlLevel","console","log","action","state","simulationTab","reactions","currentModel","map","reaction","ratelaw","parameters","checked","speciesFromModel","species","specie","initialConcentration","compartments","saveModel","getStoreState","icmin","icmax","icstep","computed","resultData","graphData","filter","item","simulate","newReactions","forEach","Error","push","simulationPayload","time","dataPoints","modifiedData","concentrationData","updateResult","switchReaction","updateSpecies","reset","setRatelaw","reversible","rateForward","rateBackward","rate","toggleSpecie","setIcmin","setIcmax","updateIc","reactants","reactant","_","includes","products","product","store","createStore","NavBar","props","React","useState","toggle","setToggle","Navbar","color","dark","expand","NavbarBrand","href","NavbarToggler","onClick","c","Collapse","isOpen","navbar","Nav","className","NavItem","NavLink","UncontrolledDropdown","nav","inNavbar","DropdownToggle","caret","data-test","DropdownMenu","right","DropdownItem","importModel","savedModels","defaultProps","ImportSbmlForm","closeModal","useStoreActions","Fragment","initialValues","onSubmit","values","a","toast","render","Form","handleSubmit","FormGroup","required","type","placeholder","onChange","event","setFieldValue","currentTarget","files","FormText","Button","API_URL","SavedModels","setData","useEffect","ListGroup","flush","ListGroupItem","tag","success","key","format","Date","createdAt","GraphLegend","Graph","nodes","edges","currentCompartment","dropdown","canvasWidth","setState","selectCompartment","compartment","gen","reactionNodes","generateReactionNodes","speciesNodes","reduce","result","label","concat","generateReactionEdges","compartmentReactions","length","specieNodes","style","findNode","object","temp","node","index","reactionsEdges","source","target","this","graph","ccNetViz","document","getElementById","styles","background","minSize","maxSize","texture","require","hideSize","edge","width","arrow","aspect","reactionNode","reactantEdge","productEdge","reversibleReactantEdge","reversibleProductEdge","onChangeViewport","viewport","onLoad","getNodesCount","getEdgesCount","onDrag","onZoom","onDblClick","passiveEvts","set","draw","prevProps","prevState","remove","icon","infoCircle","UncontrolledTooltip","placement","Dropdown","height","Component","WidthProvider","ReactionsList","overflowY","setInfo","setType","SpeciesList","prettyPrint","propertyName","InfoPanel","String","reactionString","modifiers","ResponsiveGridLayout","Responsive","ModelTab","info","modal","setModal","useStoreState","Modal","ModalHeader","ModalBody","layouts","lg","i","x","y","w","h","minW","minH","static","breakpoints","md","sm","xs","xxs","cols","rowHeight","items","onLayoutChange","draggableCancel","float","outline","disabled","buttonContent","curved","children","loading","dataTest","classes","join","settingsSchema","Yup","shape","min","max","SettingsPanel","marginBottom","validationSchema","setSubmitting","isSubmitting","errors","resetForm","row","Label","for","Col","e","value","Number","globalRatelaw","modelData","dataString","encodeURIComponent","stringify","exportAnchorElement","setAttribute","options","chart","xaxis","tickAmount","series","CustomSwitch","specieId","switched","setSwitched","CustomInput","s","CSlider","Slider","createSliderWithTooltip","SpeciesPanel","Table","borderless","hover","step","RatelawForm","element","k1","k2","k3","k4","property","parametersArr","hasOwnProperty","ReactionInfo","ReactionsPanel","reactionForRatelaw","setReactionForRatelaw","Input","SimulationTab","configure","position","POSITION","BOTTOM_RIGHT","autoClose","App","importModal","setImportModal","savedModal","setSavedModal","path","component","Boolean","window","location","hostname","match","ReactDOM","Helmet","charSet","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.dcf6f1aa.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98DBg8SMBgGJhQAAAJcSURBVDjLrZO/alRREMa/mXPOvXf/BEmybhQiBDXamM7HECxU1AgW1mIlIgiClU+ghaSLElnBPICNL2Fh4b/KsKzsZt299557z5mxiFkT0UqnnOI33/fNDPCPRb83Tj162+W0eYNcetW65FzTMR/JzLt2wq/aCW++uLLy9Y+Akw/fELG5QC59SjZdbrba6LQsjrUtjs85NB2jjtqvRW+Pvbx+dvFEBAC7D1CJF4hND2wz12hpKzVYaBhaXUyxttTQo02DvJbu+4Hf+jyq1gH0AIABYOXe9lGIPAVxRmw0MUwtRzTfsDg5n+D0QkIr8wmd6WR6tpOaxPKT673PyzOA+PyGSlwGoGTdzFZqCJllZI7hmGAZlDlWx9QZe7k1A2isr0LCnpUYoaoQBfJasDMJ6E8Cdn3EsIjoTwKmVcS0itdmGWjt16QqwY1IkAAfFXkt+FZEfBp6AMBi08AHxcdhRTuTgLGX1RlAfM5gC60KiHEglyKvUgyme6pGpaDhCEGAQR4wmAaUQfBLQfDvJB+dj0mmlDRIfI6CGAAQVTEqAgwToih8VAyLiFhOPx5cYy/mu+f3w7NHuoAKCm2jDA6GCY4JtShCXWkYD0hr3zugoN5UiXfDbr8roVKtPZm5RXBVgoxDtA6VCqQqNYx2SKpyRMZsHLrEpSsPL0s5eamhNuRSNa15cNYmTpsAMaTKVfIxaazBSXbz6/P7m4cukYzbJpuuq+qTWHzvxOkQYAuinzOIiZNsRDa9I8DWX5+pe+nBstb+lkq8plWxCoDIpR+ITY9sutHffvwF/7N+AOa9Ka0q3oiBAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADkSURBVDhPlZGxDgFRFER3JXQ+gEKiEBIqrdYHqHW+jc4HSETtV4iGRhS79z53NvNYPJt9k0yx9s7MiU1UtWOeRHoMO+d6KJiJqstFskhrrrpKrKVhD0f8gKI6LsIiN8umKEiNYho6rLKtL4sCCBQicqhDwfX7KwyRYhgKhJw5t/gogEixDwW8uf7ALWNvkaIfCpZt6/OfdS9S7EL/BdevwXUvUnS/w974Wn/XvUixLVNw/VS57kWKdnkZNo3wjmfVwqFRrLkMn2uHIRybW37diAZRBRApNrZ+iQ5DpGjiq/wvSJInLsNx8D4f8OUAAAAASUVORK5CYII=\"","import { createStore, action, thunk, computed } from 'easy-peasy'\r\nimport axios from 'axios'\r\nimport _ from 'lodash'\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL\r\n  ? process.env.REACT_APP_API_URL\r\n  : 'http://localhost:5000/'\r\n\r\nconst model = {\r\n  /*\r\n   * Common global state\r\n   */\r\n  modelMetadata: {},\r\n\r\n  /**\r\n   * Thunk to import an sbml file to the backend\r\n   */\r\n  importSbml: thunk((actions, file) => {\r\n    const formData = new FormData()\r\n    formData.append('file', file, file.name)\r\n    return axios({\r\n      method: 'post',\r\n      url: `${API_URL}api/uploadSbml`,\r\n      data: formData,\r\n    })\r\n      .then(res => {\r\n        const json = JSON.parse(res.data) // Parse the incoming data to JSON\r\n        actions.modelTab.setCurrentModel(json)\r\n      })\r\n      .then(() => {\r\n        actions.initSimulation()\r\n        return { error: false }\r\n      })\r\n      .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n  }),\r\n  /**\r\n   * Thunk to fetch a model or all models from the backend\r\n   */\r\n  getModel: thunk((actions, payload) => {\r\n    return axios({ method: 'get', url: `${API_URL}api/model/get/${payload}` })\r\n      .then(res => {\r\n        const data = res.data.jsonModel\r\n        actions.modelTab.setCurrentModel(data)\r\n        actions.setModelMetadata({\r\n          name: data.name,\r\n          id: data.id,\r\n          sbmlVersion: data.sbmlVersion,\r\n          sbmlLevel: data.sbmlLevel,\r\n        })\r\n      })\r\n      .then(() => {\r\n        actions.initSimulation()\r\n        return { error: false, message: 'Successfully retrieved model.' }\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        return { error: true, message: 'Something went wrong.' }\r\n      })\r\n  }),\r\n  /**\r\n   * Action to initialize the simulation tab state with the data of a sbml model\r\n   */\r\n  initSimulation: action(state => {\r\n    state.simulationTab.reactions = state.modelTab.currentModel.reactions.map(\r\n      reaction => ({\r\n        ...reaction,\r\n        ratelaw: '',\r\n        parameters: [],\r\n        checked: false,\r\n      })\r\n    )\r\n    state.simulationTab.speciesFromModel = state.modelTab.currentModel.species.map(\r\n      specie => ({ ...specie, initialConcentration: 0 })\r\n    )\r\n  }),\r\n  /**\r\n   * Action to set the metadata of the model\r\n   */\r\n  setModelMetadata: action((state, payload) => {\r\n    state.modelMetadata = {\r\n      name: payload.name,\r\n      id: payload.id,\r\n      sbmlVersion: payload.sbmlVersion,\r\n      sbmlLevel: payload.sbmlLevel,\r\n    }\r\n  }),\r\n\r\n  /*\r\n   * Model tab state\r\n   */\r\n\r\n  modelTab: {\r\n    currentModel: {\r\n      species: [],\r\n      reactions: [],\r\n      compartments: [],\r\n    },\r\n    /**\r\n     * Thunk to save the model in the database\r\n     */\r\n    saveModel: thunk((actions, payload, { getStoreState }) => {\r\n      const state = getStoreState()\r\n      return axios({\r\n        method: 'post',\r\n        url: `${API_URL}api/model/add`,\r\n        data: state.modelTab.currentModel,\r\n      })\r\n        .then(res => ({ message: 'Successfully saved.', error: false }))\r\n        .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n    }),\r\n    /**\r\n     * Action to initialize the state of the model tab with the data of a sbml model\r\n     */\r\n    setCurrentModel: action((state, payload) => {\r\n      state.currentModel = payload\r\n    }),\r\n  },\r\n\r\n  /*\r\n   * Simulation tab state\r\n   */\r\n\r\n  simulationTab: {\r\n    icmin: 0,\r\n    icmax: 100,\r\n    icstep: computed(state => (state.icmax - state.icmin) / 100), // Computes the optimum step with no of steps = 100\r\n    reactions: [],\r\n    speciesFromModel: [],\r\n    species: [],\r\n    resultData: [],\r\n    /**\r\n     * graphData is computed from resultData as the user can\r\n     * toggle species in the graph after a simulation\r\n     */\r\n    graphData: computed(state => {\r\n      return state.resultData.filter(item => {\r\n        if (item.checked) return true\r\n        else return false\r\n      })\r\n    }),\r\n    /**\r\n     * Thunk to run the simulation in the backend\r\n     */\r\n    simulate: thunk((actions, payload, { getStoreState }) => {\r\n      const state = getStoreState()\r\n      let newReactions = []\r\n      state.simulationTab.reactions.forEach(reaction => {\r\n        if (reaction.checked === true) {\r\n          if (reaction.ratelaw === '') {\r\n            throw new Error('Ratelaw found empty for reaction: ' + reaction.id)\r\n          } else newReactions.push(reaction)\r\n        }\r\n      })\r\n      const simulationPayload = {\r\n        time: payload.time,\r\n        dataPoints: payload.dataPoints,\r\n        reactions: newReactions,\r\n        species: state.simulationTab.species,\r\n      }\r\n      return axios({\r\n        method: 'post',\r\n        url: `${API_URL}api/simulation`,\r\n        data: simulationPayload,\r\n      })\r\n        .then(res => {\r\n          const data = JSON.parse(res.data)\r\n          const modifiedData = data.concentrationData.map(item => ({\r\n            ...item,\r\n            checked: true,\r\n          }))\r\n          actions.updateResult(modifiedData)\r\n          return { error: false, message: 'Simulation successful.' }\r\n        })\r\n        .catch(err => ({ message: 'Something went wrong.', error: true }))\r\n    }),\r\n    /**\r\n     * Thunk to switch on/off a reaction in the simulation\r\n     */\r\n    switchReaction: thunk((actions, payload, { getStoreState }) => {\r\n      let state = getStoreState()\r\n      state.simulationTab.reactions = state.simulationTab.reactions.map(\r\n        reaction => {\r\n          if (reaction.id === payload.id)\r\n            return { ...reaction, checked: !reaction.checked }\r\n          else return reaction\r\n        }\r\n      )\r\n      actions.updateSpecies()\r\n    }),\r\n    /**\r\n     * Thunk to reset all the configuration made in the simulation panel\r\n     */\r\n    reset: thunk((actions, payload, { getStoreState }) => {\r\n      const { simulationTab } = getStoreState()\r\n      simulationTab.reactions = simulationTab.reactions.map(reaction => ({\r\n        ...reaction,\r\n        checked: false,\r\n        ratelaw: '',\r\n        parameters: [],\r\n      }))\r\n      simulationTab.icmin = 0\r\n      simulationTab.icmax = 100\r\n      actions.updateSpecies()\r\n    }),\r\n    /**\r\n     * Action to set the ratelaw of a particular reaction\r\n     */\r\n    setRatelaw: action((state, payload) => {\r\n      state.reactions = state.reactions.map(reaction => {\r\n        if (payload.id === reaction.id) {\r\n          if (payload.ratelaw === 'custom-rate') {\r\n            if (reaction.reversible) {\r\n              return {\r\n                ...reaction,\r\n                ratelaw: payload.ratelaw,\r\n                rateForward: payload.rateForward,\r\n                rateBackward: payload.rateBackward,\r\n              }\r\n            }\r\n            return {\r\n              ...reaction,\r\n              ratelaw: payload.ratelaw,\r\n              rate: payload.rate,\r\n            }\r\n          } else\r\n            return {\r\n              ...reaction,\r\n              ratelaw: payload.ratelaw,\r\n              parameters: payload.parameters,\r\n            }\r\n        } else return reaction\r\n      })\r\n    }),\r\n    /**\r\n     * Action to toggle a specie from the graph\r\n     */\r\n    toggleSpecie: action((state, payload) => {\r\n      state.resultData = state.resultData.map(item => {\r\n        if (item.name === payload) {\r\n          return { ...item, checked: !item.checked }\r\n        } else return item\r\n      })\r\n    }),\r\n    /**\r\n     * Action to update the resultData after a simulation is run\r\n     */\r\n    updateResult: action((state, payload) => {\r\n      state.resultData = payload\r\n    }),\r\n    /**\r\n     * Action to set the minimum initial concentration\r\n     */\r\n    setIcmin: action((state, payload) => {\r\n      state.icmin = payload\r\n    }),\r\n    /**\r\n     * Action to set the maximum initial concentration\r\n     */\r\n    setIcmax: action((state, payload) => {\r\n      state.icmax = payload\r\n    }),\r\n    /**\r\n     * Action to set the initial concentration of any particular specie\r\n     */\r\n    updateIc: action((state, payload) => {\r\n      state.species.forEach(specie => {\r\n        if (specie.id === payload.id) {\r\n          specie.initialConcentration = payload.initialConcentration\r\n        }\r\n      })\r\n      state.speciesFromModel.forEach(specie => {\r\n        if (specie.id === payload.id) {\r\n          specie.initialConcentration = payload.initialConcentration\r\n        }\r\n      })\r\n    }),\r\n    /**\r\n     * Action to update the species in the species panel according to all the checked reactions in the reaction panel\r\n     */\r\n    updateSpecies: action((state, payload) => {\r\n      state.species = []\r\n      state.reactions.map(reaction => {\r\n        if (reaction.checked) {\r\n          reaction.reactants.map(reactant => {\r\n            return state.speciesFromModel.map(specie => {\r\n              if (reactant.id === specie.id) {\r\n                if (!_.includes(state.species, specie)) {\r\n                  return state.species.push(specie)\r\n                } else {\r\n                  return false\r\n                }\r\n              } else {\r\n                return false\r\n              }\r\n            })\r\n          })\r\n          return reaction.products.map(product => {\r\n            return state.speciesFromModel.map(specie => {\r\n              if (product.id === specie.id) {\r\n                if (!_.includes(state.species, specie)) {\r\n                  return state.species.push(specie)\r\n                } else {\r\n                  return false\r\n                }\r\n              } else {\r\n                return false\r\n              }\r\n            })\r\n          })\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    }),\r\n  },\r\n}\r\n\r\nexport const store = createStore(model)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Collapse,\r\n  Navbar,\r\n  NavbarToggler,\r\n  NavbarBrand,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  UncontrolledDropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n} from 'reactstrap'\r\n\r\nfunction NavBar(props) {\r\n  const [toggle, setToggle] = React.useState(false)\r\n\r\n  return (\r\n    <Navbar color=\"dark\" dark expand=\"md\">\r\n      <NavbarBrand href=\"/\">ODE App</NavbarBrand>\r\n      <NavbarToggler\r\n        onClick={() => {\r\n          setToggle(c => !c)\r\n        }}\r\n      />\r\n      <Collapse isOpen={toggle} navbar>\r\n        <Nav className=\"ml-auto\" navbar>\r\n          <NavItem>\r\n            <NavLink href=\"/#/model\">Model</NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink href=\"/#/simulation\">Simulation</NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n        <Nav className=\"ml-auto\" navbar>\r\n          <UncontrolledDropdown nav inNavbar>\r\n            <DropdownToggle nav caret data-test=\"options\">\r\n              Options\r\n            </DropdownToggle>\r\n            <DropdownMenu right>\r\n              <DropdownItem\r\n                onClick={props.importModel}\r\n                data-test=\"importOption\"\r\n              >\r\n                Import Model\r\n              </DropdownItem>\r\n              <DropdownItem onClick={props.savedModels}>\r\n                Saved Models\r\n              </DropdownItem>\r\n            </DropdownMenu>\r\n          </UncontrolledDropdown>\r\n        </Nav>\r\n      </Collapse>\r\n    </Navbar>\r\n  )\r\n}\r\n\r\nNavBar.propTypes = {\r\n  importModel: PropTypes.func,\r\n  savedModels: PropTypes.func,\r\n}\r\n\r\nNavBar.defaultProps = {\r\n  importModel: () => {},\r\n  savedModels: () => {},\r\n}\r\n\r\nexport default NavBar\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Formik } from 'formik'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport { toast } from 'react-toastify'\r\nimport { Button, Form, FormText, FormGroup } from 'reactstrap'\r\n\r\nfunction ImportSbmlForm({ closeModal }) {\r\n  const importSbml = useStoreActions(actions => actions.importSbml)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Formik\r\n        initialValues={{ file: '' }}\r\n        onSubmit={async (values, actions) => {\r\n          if (values.file) {\r\n            const data = await importSbml(values.file)\r\n            if (data.error) toast.error(data.message)\r\n            else {\r\n              closeModal()\r\n            }\r\n          }\r\n        }}\r\n        render={props => (\r\n          <Form onSubmit={props.handleSubmit}>\r\n            <FormGroup>\r\n              <input\r\n                required\r\n                type=\"file\"\r\n                name=\"file\"\r\n                placeholder=\"Upload\"\r\n                onChange={event => {\r\n                  props.setFieldValue('file', event.currentTarget.files[0])\r\n                }}\r\n              />\r\n              <FormText color=\"muted\">\r\n                Please upload a .sbml or .xml file which is formatted atleast in\r\n                level 2 SBML for kinetic (ODE) models.\r\n              </FormText>\r\n            </FormGroup>\r\n            <Button\r\n              color=\"primary\"\r\n              type=\"submit\"\r\n              data-test=\"import-submit-button\"\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nImportSbmlForm.propTypes = {\r\n  closeModal: PropTypes.func,\r\n}\r\n\r\nImportSbmlForm.defaultProps = {\r\n  closeModal: () => {\r\n    console.log('No function bound.')\r\n  },\r\n}\r\n\r\nexport default ImportSbmlForm\r\n","import React from 'react'\r\nimport axios from 'axios'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport { format } from 'date-fns'\r\nimport { toast } from 'react-toastify'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\n// URL of the server (backend)\r\nconst API_URL = process.env.REACT_APP_API_URL\r\n  ? process.env.REACT_APP_API_URL\r\n  : 'http://localhost:5000/'\r\n\r\nfunction SavedModels() {\r\n  const [data, setData] = React.useState([])\r\n  const getModel = useStoreActions(actions => actions.getModel)\r\n\r\n  // Calls the get api to fetch all the models\r\n  React.useEffect(() => {\r\n    axios({ method: 'get', url: `${API_URL}api/model/get/all` })\r\n      .then(res => setData(res.data))\r\n      .catch(err => console.error(err))\r\n  }, [])\r\n\r\n  if (data) {\r\n    return (\r\n      <ListGroup flush>\r\n        {data.map(item => (\r\n          <ListGroupItem\r\n            tag=\"button\"\r\n            action\r\n            onClick={async () => {\r\n              const data = await getModel(item.id)\r\n              if (data.error) toast.error(data.message)\r\n              else toast.success(data.message)\r\n            }}\r\n            key={item.id}\r\n          >\r\n            {item.name} -{' '}\r\n            {format(new Date(item.createdAt), 'D MMMM YYYY - hh:mm:ss A')}\r\n          </ListGroupItem>\r\n        ))}\r\n      </ListGroup>\r\n    )\r\n  } else {\r\n    return <div />\r\n  }\r\n}\r\n\r\nexport default SavedModels\r\n","import React from 'react'\r\n\r\nfunction GraphLegend() {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon blue\" />- Specie Nodes\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon red\" />- Reaction Nodes\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon green\" />- Reactant Edge\r\n      </div>\r\n      <div className=\"flex\">\r\n        <div className=\"circle-icon yellow\" />- Product Edge\r\n      </div>\r\n      <div className=\"flex\">--> - Reversible reactions</div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default GraphLegend\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport ccNetViz from 'ccnetviz'\r\nimport _ from 'lodash'\r\nimport { WidthProvider } from 'react-grid-layout'\r\nimport {\r\n  UncontrolledTooltip,\r\n  Dropdown,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  DropdownToggle,\r\n} from 'reactstrap'\r\nimport { Icon } from 'react-icons-kit'\r\nimport { infoCircle } from 'react-icons-kit/fa/infoCircle'\r\nimport GraphLegend from './GraphLegend'\r\nimport './style.scss'\r\n\r\nclass Graph extends React.Component {\r\n  state = {\r\n    nodes: [],\r\n    edges: [],\r\n    compartments: [],\r\n    currentCompartment: 'all',\r\n    dropdown: false,\r\n    canvasWidth: 0,\r\n  }\r\n\r\n  // Toggles the dropdown for the compartments button\r\n  toggle = () => {\r\n    this.setState({ dropdown: !this.state.dropdown })\r\n  }\r\n\r\n  // Select handler for compartments\r\n  selectCompartment = compartment => {\r\n    this.setState({ currentCompartment: compartment })\r\n  }\r\n\r\n  /*\r\n    Nodes/Edges generator function:\r\n    The function checks the currentCompartment state and if 'all'\r\n    is selected it takes all the reactions/species and creates\r\n    nodes/edges for them, if any other compartment is selected it\r\n    takes all of the reactions belonging only to that compartment\r\n    and generates nodes/egdes accordingly.  \r\n  */\r\n  gen = () => {\r\n    const { reactions, species, compartments } = this.props\r\n    const { currentCompartment } = this.state\r\n    this.setState({ compartments })\r\n    try {\r\n      if (currentCompartment === 'all') {\r\n        let reactionNodes = this.generateReactionNodes(reactions)\r\n        let speciesNodes = species.reduce((result, specie) => {\r\n          result.push({ label: specie.id })\r\n          return result\r\n        }, [])\r\n        let nodes = _.concat(reactionNodes, speciesNodes)\r\n        let edges = this.generateReactionEdges(reactions, nodes)\r\n        this.setState({ nodes, edges })\r\n      } else {\r\n        let compartmentReactions = reactions.filter(reaction => {\r\n          if (\r\n            _.includes(reaction.compartments, currentCompartment) && // Checks if reaction is in compartment\r\n            reaction.compartments.length === 1 // Checks if the reaction has only that compartment\r\n          ) {\r\n            return true\r\n          } else return false\r\n        })\r\n        let reactionNodes = this.generateReactionNodes(compartmentReactions)\r\n        let specieNodes = species.reduce((result, specie) => {\r\n          if (specie.compartment === currentCompartment) {\r\n            result.push({ label: specie.id })\r\n          }\r\n          return result\r\n        }, [])\r\n        let nodes = _.concat(reactionNodes, specieNodes)\r\n        let edges = this.generateReactionEdges(compartmentReactions, nodes)\r\n        this.setState({ nodes, edges })\r\n      }\r\n    } catch {}\r\n  }\r\n\r\n  // Generates nodes for reactions given to it\r\n  generateReactionNodes = reactions => {\r\n    const reactionNodes = reactions.map(reaction => {\r\n      return {\r\n        label: reaction.id,\r\n        style: 'reactionNode',\r\n      }\r\n    })\r\n    return reactionNodes\r\n  }\r\n\r\n  // Finds the index of the node, given the label\r\n  findNode = (object, nodes) => {\r\n    let temp\r\n    nodes.filter((node, index) => {\r\n      if (node.label === object.label) {\r\n        return (temp = index)\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n    return temp\r\n  }\r\n\r\n  /* \r\n  Function to generate edges for each reaction:\r\n  Every edge is given a referenced value of the nodes array instead of the node\r\n  itself, this is due to the API of ccNetViz. \r\n  */\r\n  generateReactionEdges = (reactions, nodes) => {\r\n    const reactionsEdges = []\r\n    reactions.map(reaction => {\r\n      reaction.reactants.map(reactant => {\r\n        if (reaction.reversible) {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reactant.id }, nodes)],\r\n            target: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            style: 'reversibleReactantEdge',\r\n          })\r\n        } else {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reactant.id }, nodes)],\r\n            target: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            style: 'reactantEdge',\r\n          })\r\n        }\r\n      })\r\n      return reaction.products.map(product => {\r\n        if (reaction.reversible) {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            target: nodes[this.findNode({ label: product.id }, nodes)],\r\n            style: 'reversibleProductEdge',\r\n          })\r\n        } else {\r\n          return reactionsEdges.push({\r\n            source: nodes[this.findNode({ label: reaction.id }, nodes)],\r\n            target: nodes[this.findNode({ label: product.id }, nodes)],\r\n            style: 'productEdge',\r\n          })\r\n        }\r\n      })\r\n    })\r\n    return reactionsEdges\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ compartments: this.props.compartments })\r\n    this.graph = new ccNetViz(document.getElementById('graph'), {\r\n      // Creates the ccNetViz graph object\r\n      styles: {\r\n        background: {\r\n          color: 'rgb(255, 255, 255)',\r\n        },\r\n        node: {\r\n          minSize: 6,\r\n          maxSize: 16,\r\n          color: 'rgb(47, 109, 206)',\r\n          texture: require('../../../assets/node.png'),\r\n          label: {\r\n            color: 'rgb(0, 0, 0)',\r\n            hideSize: 16,\r\n          },\r\n        },\r\n        edge: {\r\n          width: 1,\r\n          color: 'rgb(50, 50, 50)',\r\n          arrow: {\r\n            minSize: 1,\r\n            maxSize: 16,\r\n            aspect: 1,\r\n            texture: require('../../../assets/arrow.png'),\r\n            hideSize: 1,\r\n          },\r\n          type: 'line',\r\n        },\r\n        reactionNode: {\r\n          color: 'rgb(200, 0, 0)',\r\n          label: {\r\n            hideSize: 16,\r\n          },\r\n        },\r\n        reactantEdge: {\r\n          color: 'rgb(89, 249, 2)',\r\n        },\r\n        productEdge: {\r\n          color: 'rgb(255, 246, 0)',\r\n        },\r\n        reversibleReactantEdge: { color: 'rgb(89, 249, 2)', type: 'dashed' },\r\n        reversibleProductEdge: { color: 'rgb(255, 246, 0)', type: 'dashed' },\r\n      },\r\n      onChangeViewport: function(viewport) {},\r\n      onLoad: function() {},\r\n      getNodesCount() {},\r\n      getEdgesCount() {},\r\n      onDrag: function(viewport) {},\r\n      onZoom: function(viewport) {},\r\n      onClick: function() {\r\n        return false\r\n      },\r\n      onDblClick: function() {},\r\n      passiveEvts: true,\r\n    })\r\n\r\n    this.gen() // Generates nodes/edges\r\n    // Sets the nodes and then draws the graph on the DOM\r\n    this.graph.set(this.state.nodes, this.state.edges, 'force').then(() => {\r\n      this.graph.draw()\r\n    })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      prevProps.reactions !== this.props.reactions ||\r\n      prevProps.species !== this.props.species\r\n    ) {\r\n      this.setState({ currentCompartment: 'all' })\r\n    }\r\n    if (\r\n      prevProps.reactions !== this.props.reactions ||\r\n      prevProps.species !== this.props.species ||\r\n      prevState.currentCompartment !== this.state.currentCompartment\r\n    ) {\r\n      this.gen()\r\n    }\r\n    if (\r\n      prevState.nodes !== this.state.nodes ||\r\n      prevState.edges !== this.state.edges\r\n    ) {\r\n      this.graph.set(this.state.nodes, this.state.edges, 'force').then(() => {\r\n        this.graph.draw()\r\n      })\r\n    }\r\n    if (prevProps.width !== this.props.width) {\r\n      this.setState({ canvasWidth: this.props.width })\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.graph.remove()\r\n  }\r\n\r\n  render() {\r\n    const { compartments, canvasWidth } = this.state\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">\r\n          Graph{` `}\r\n          <Icon icon={infoCircle} id=\"graph-legend-info\" />\r\n          <UncontrolledTooltip placement=\"right\" target=\"graph-legend-info\">\r\n            <GraphLegend />\r\n          </UncontrolledTooltip>\r\n        </h4>\r\n        <Dropdown isOpen={this.state.dropdown} toggle={this.toggle}>\r\n          <DropdownToggle data-test=\"compartment-button\" color=\"success\">\r\n            Compartments\r\n          </DropdownToggle>\r\n          <DropdownMenu>\r\n            <DropdownItem\r\n              onClick={() => {\r\n                this.selectCompartment('all')\r\n              }}\r\n            >\r\n              All\r\n            </DropdownItem>\r\n            {compartments.map(compartment => (\r\n              <DropdownItem\r\n                key={compartment.id}\r\n                onClick={() => {\r\n                  this.selectCompartment(compartment.id)\r\n                }}\r\n              >\r\n                {compartment.name}\r\n              </DropdownItem>\r\n            ))}\r\n          </DropdownMenu>\r\n        </Dropdown>\r\n        <br />\r\n        <canvas\r\n          id=\"graph\"\r\n          width={canvasWidth}\r\n          height=\"550\"\r\n          className=\"nonDraggableArea\"\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nGraph.propTypes = {\r\n  reactions: PropTypes.array,\r\n  species: PropTypes.array,\r\n  compartments: PropTypes.array,\r\n}\r\n\r\nGraph.defaultProps = {\r\n  reactions: [],\r\n  species: [],\r\n  compartments: [],\r\n}\r\n\r\nexport default WidthProvider(Graph)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nfunction ReactionsList(props) {\r\n  if (props.reactions) {\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">Reactions</h4>\r\n        <ListGroup\r\n          flush\r\n          style={{ height: '250px', overflowY: 'auto' }}\r\n          className=\"nonDraggableArea\"\r\n          data-test=\"reactions-list\"\r\n        >\r\n          {props.reactions.map(reaction => (\r\n            <ListGroupItem\r\n              key={reaction.id}\r\n              tag=\"button\"\r\n              action\r\n              onClick={() => {\r\n                props.setInfo(reaction)\r\n                props.setType('reaction')\r\n              }}\r\n            >\r\n              {reaction.id} - {reaction.name}\r\n            </ListGroupItem>\r\n          ))}\r\n        </ListGroup>\r\n      </div>\r\n    )\r\n  } else {\r\n    return <div>No data</div>\r\n  }\r\n}\r\n\r\nReactionsList.propTypes = {\r\n  reactions: PropTypes.array,\r\n  setInfo: PropTypes.func,\r\n  setType: PropTypes.func,\r\n}\r\n\r\nReactionsList.defaultProps = {\r\n  reactions: [],\r\n  setInfo: () => {},\r\n  setType: () => {},\r\n}\r\n\r\nexport default ReactionsList\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nfunction SpeciesList(props) {\r\n  if (props.species) {\r\n    return (\r\n      <div>\r\n        <h4 className=\"text-muted\">Species</h4>\r\n        <ListGroup\r\n          flush\r\n          style={{ height: '250px', overflowY: 'auto' }}\r\n          data-test=\"species-list\"\r\n        >\r\n          {props.species.map(specie => (\r\n            <ListGroupItem\r\n              key={specie.id}\r\n              tag=\"button\"\r\n              action\r\n              onClick={() => {\r\n                props.setInfo(specie)\r\n                props.setType('specie')\r\n              }}\r\n            >\r\n              {specie.id} - {specie.name}\r\n            </ListGroupItem>\r\n          ))}\r\n        </ListGroup>\r\n      </div>\r\n    )\r\n  } else {\r\n    return <div>No data</div>\r\n  }\r\n}\r\n\r\nSpeciesList.propTypes = {\r\n  species: PropTypes.array,\r\n  setInfo: PropTypes.func,\r\n  setType: PropTypes.func,\r\n}\r\n\r\nSpeciesList.defaultProps = {\r\n  species: [],\r\n  setInfo: () => {},\r\n  setType: () => {},\r\n}\r\n\r\nexport default SpeciesList\r\n","/**\r\n * Simple function to pretty print an array of strings or objects\r\n * @param {array} data\r\n * @param {string} propertyName\r\n */\r\nexport function prettyPrint(data, propertyName) {\r\n  if (propertyName) {\r\n    return data.map((item, index) => {\r\n      if (index === data.length - 1) return `${item[propertyName]}`\r\n      else return `${item[propertyName]}, `\r\n    })\r\n  } else {\r\n    return data.map((item, index) => {\r\n      if (index === data.length - 1) return `${item}`\r\n      else return `${item}, `\r\n    })\r\n  }\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { prettyPrint } from '../../../utils'\r\n\r\nfunction InfoPanel(props) {\r\n  // If specie is clicked shows information species\r\n  if (props.type === 'specie') {\r\n    return (\r\n      <div data-test=\"info-panel\">\r\n        <dl className=\"row nonDraggableArea\">\r\n          <dt className=\"col-sm-5\">Specie ID</dt>\r\n          <dd className=\"col-sm-7\">{props.data.id}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Specie Name</dt>\r\n          <dd className=\"col-sm-7\">{props.data.name}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Compartment</dt>\r\n          <dd className=\"col-sm-7\">{props.data.compartment}</dd>\r\n\r\n          <dt className=\"col-sm-5\">Initial Concentration</dt>\r\n          <dd className=\"col-sm-7\">{props.data.initialConcentration}</dd>\r\n        </dl>\r\n      </div>\r\n    )\r\n    // If reaction is clicked shows information reaction\r\n  } else if (props.type === 'reaction') {\r\n    return (\r\n      <div data-test=\"info-panel\">\r\n        <dl className=\"row nonDraggableArea\">\r\n          <dt className=\"col-sm-4\">Reaction ID</dt>\r\n          <dd className=\"col-sm-8\">{props.data.id}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reaction Name</dt>\r\n          <dd className=\"col-sm-8\">{props.data.name}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reversible</dt>\r\n          <dd className=\"col-sm-8\">{String(props.data.reversible)}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Reaction</dt>\r\n          <dd className=\"col-sm-8\">{props.data.reactionString}</dd>\r\n\r\n          <dt className=\"col-sm-4\">Modifiers</dt>\r\n          <dd className=\"col-sm-8\">{prettyPrint(props.data.modifiers)}</dd>\r\n        </dl>\r\n      </div>\r\n    )\r\n  } else {\r\n    return <React.Fragment />\r\n  }\r\n}\r\n\r\nInfoPanel.propTypes = {\r\n  type: PropTypes.string,\r\n  data: PropTypes.object,\r\n}\r\n\r\nInfoPanel.defaultProps = {\r\n  type: '',\r\n  data: {},\r\n}\r\n\r\nexport default InfoPanel\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport { Button, Modal, ModalHeader, ModalBody } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport { Responsive, WidthProvider } from 'react-grid-layout'\r\nimport Graph from './Graph'\r\nimport ReactionsList from './ReactionsList'\r\nimport SpeciesList from './SpeciesList'\r\nimport InfoPanel from './InfoPanel'\r\n\r\nconst ResponsiveGridLayout = WidthProvider(Responsive)\r\n\r\nfunction ModelTab() {\r\n  const [type, setType] = React.useState('')\r\n  const [info, setInfo] = React.useState({})\r\n  const [modal, setModal] = React.useState(false)\r\n\r\n  const { reactions, species, name, compartments } = useStoreState(\r\n    state => state.modelTab.currentModel\r\n  )\r\n\r\n  let layouts = {\r\n    lg: [\r\n      { i: 'graph', x: 0, y: 0, w: 6, h: 14, minW: 5, minH: 14, static: true },\r\n      { i: 'reactions', x: 6, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'species', x: 9, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'info', x: 6, y: 7, w: 6, h: 5, minW: 6, minH: 5 },\r\n    ],\r\n  }\r\n\r\n  const saveModel = useStoreActions(actions => actions.modelTab.saveModel)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Modal\r\n        isOpen={modal}\r\n        toggle={() => {\r\n          setModal(!modal)\r\n        }}\r\n      >\r\n        <ModalHeader\r\n          toggle={() => {\r\n            setModal(!modal)\r\n          }}\r\n        >\r\n          Save your SBML Model\r\n        </ModalHeader>\r\n        <ModalBody>\r\n          Are you sure?\r\n          <br />\r\n          <br />\r\n          <Button\r\n            data-test=\"confirm-save-button\"\r\n            color=\"primary\"\r\n            onClick={async () => {\r\n              const temp = await saveModel()\r\n              if (temp.error) toast.error(temp.message)\r\n              else toast.success(temp.message)\r\n              setModal(!modal)\r\n            }}\r\n          >\r\n            Yes\r\n          </Button>\r\n          {` `}\r\n          <Button color=\"danger\" onClick={() => setModal(!modal)}>\r\n            Cancel\r\n          </Button>\r\n        </ModalBody>\r\n      </Modal>\r\n      <ResponsiveGridLayout\r\n        className=\"layout\"\r\n        layouts={layouts}\r\n        breakpoints={{ lg: 1200, md: 996, sm: 768, xs: 480, xxs: 0 }}\r\n        cols={{ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 }}\r\n        rowHeight={40}\r\n        items={4}\r\n        onLayoutChange={() => {}}\r\n        draggableCancel=\".nonDraggableArea\"\r\n      >\r\n        <div key=\"graph\">\r\n          <Graph\r\n            reactions={reactions}\r\n            species={species}\r\n            compartments={compartments}\r\n          />\r\n        </div>\r\n        <div key=\"reactions\">\r\n          <ReactionsList\r\n            reactions={reactions}\r\n            setInfo={setInfo}\r\n            setType={setType}\r\n          />\r\n        </div>\r\n        <div key=\"species\">\r\n          <SpeciesList species={species} setInfo={setInfo} setType={setType} />\r\n        </div>\r\n        <div key=\"info\">\r\n          <InfoPanel type={type} data={info} />\r\n          <Button\r\n            data-test=\"save-model-button\"\r\n            style={{ float: 'right' }}\r\n            outline\r\n            color=\"success\"\r\n            onClick={() => setModal(!modal)}\r\n            disabled={name ? false : true}\r\n          >\r\n            Save Model\r\n          </Button>\r\n        </div>\r\n      </ResponsiveGridLayout>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ModelTab\r\n","import React from 'react'\r\nimport ReactLoading from 'react-loading'\r\nimport PropTypes from 'prop-types'\r\nimport './style.scss'\r\n\r\nfunction Button({\r\n  className,\r\n  curved,\r\n  color,\r\n  children,\r\n  loading,\r\n  onClick,\r\n  type,\r\n  'data-test': dataTest,\r\n}) {\r\n  let classes = []\r\n\r\n  // Setting classes as per props recieved\r\n  classes.push(className)\r\n  if (curved) {\r\n    classes.push('curved-button')\r\n  }\r\n\r\n  let buttonContent\r\n\r\n  // If loading prop is true changes the button content to a loader\r\n  if (loading) {\r\n    buttonContent = (\r\n      <ReactLoading\r\n        type={'bars'}\r\n        color={color}\r\n        height={'30px'}\r\n        width={'30px'}\r\n        className=\"button-loading-icon\"\r\n      />\r\n    )\r\n  } else {\r\n    buttonContent = children\r\n  }\r\n  return (\r\n    <button\r\n      type={type}\r\n      className={classes.join(' ')}\r\n      disabled={loading}\r\n      onClick={onClick}\r\n      data-test={dataTest}\r\n    >\r\n      {buttonContent}\r\n    </button>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  loading: PropTypes.bool,\r\n  curved: PropTypes.bool,\r\n  type: PropTypes.string,\r\n  color: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n}\r\n\r\nButton.defaultProps = {\r\n  loading: false,\r\n  curved: false,\r\n  type: 'button',\r\n  color: 'white',\r\n}\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport { Formik, Field } from 'formik'\r\nimport { Form, FormGroup, Label, Col } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport * as Yup from 'yup'\r\nimport Button from '../../Button'\r\n\r\nconst settingsSchema = Yup.object().shape({\r\n  time: Yup.number()\r\n    .min(2)\r\n    .max(1000)\r\n    .required('Required'),\r\n  dataPoints: Yup.number()\r\n    .min(2)\r\n    .max(5000)\r\n    .required('Required'),\r\n})\r\n\r\nfunction SettingsPanel() {\r\n  const { simulate, setIcmin, setIcmax, reset } = useStoreActions(\r\n    actions => actions.simulationTab\r\n  )\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n        Settings\r\n      </h4>\r\n      <Formik\r\n        initialValues={{\r\n          time: 10,\r\n          dataPoints: 500,\r\n          icmin: 0,\r\n          icmax: 100,\r\n        }}\r\n        validationSchema={settingsSchema}\r\n        onSubmit={async (values, actions) => {\r\n          try {\r\n            const data = await simulate({\r\n              time: values.time,\r\n              dataPoints: values.dataPoints,\r\n            })\r\n            if (data.error) toast.error(data.message)\r\n            else toast.success(data.message)\r\n          } catch (err) {\r\n            toast.error(err.message)\r\n          }\r\n          actions.setSubmitting(false)\r\n        }}\r\n        render={({\r\n          handleSubmit,\r\n          isSubmitting,\r\n          errors,\r\n          setFieldValue,\r\n          resetForm,\r\n        }) => (\r\n          <Form onSubmit={handleSubmit} className=\"nonDraggableArea\">\r\n            <FormGroup row>\r\n              <Label for=\"time\" sm={5}>\r\n                Time:\r\n              </Label>\r\n              <Col sm={7}>\r\n                <Field\r\n                  className={`form-control ${errors.time ? 'is-invalid' : ''}`}\r\n                  type=\"number\"\r\n                  name=\"time\"\r\n                />\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n              <Label for=\"dataPoints\" sm={5}>\r\n                Data Points:\r\n              </Label>\r\n              <Col sm={7}>\r\n                <Field\r\n                  className={`form-control ${\r\n                    errors.dataPoints ? 'is-invalid' : ''\r\n                  }`}\r\n                  type=\"number\"\r\n                  name=\"dataPoints\"\r\n                />\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n              <Label for=\"icmin\" sm={5}>\r\n                IC Min:\r\n              </Label>\r\n              <Col sm={7}>\r\n                <Field\r\n                  className=\"form-control\"\r\n                  type=\"number\"\r\n                  name=\"icmin\"\r\n                  onChange={e => {\r\n                    setFieldValue('icmin', e.target.value)\r\n                    setIcmin(Number(e.target.value))\r\n                  }}\r\n                />\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup row>\r\n              <Label for=\"icmax\" sm={5}>\r\n                IC Max:\r\n              </Label>\r\n              <Col sm={7}>\r\n                <Field\r\n                  className=\"form-control\"\r\n                  type=\"number\"\r\n                  name=\"icmax\"\r\n                  onChange={e => {\r\n                    setFieldValue('icmax', e.target.value)\r\n                    setIcmax(Number(e.target.value))\r\n                  }}\r\n                />\r\n              </Col>\r\n            </FormGroup>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isSubmitting}\r\n              className=\"btn btn-success\"\r\n              data-test=\"run-button\"\r\n            >\r\n              Run\r\n            </Button>{' '}\r\n            <Button\r\n              className=\"btn btn-warning\"\r\n              onClick={() => {\r\n                reset()\r\n                resetForm()\r\n              }}\r\n              data-test=\"reset-button\"\r\n            >\r\n              Reset\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SettingsPanel\r\n","import React from 'react'\r\nimport Chart from 'react-apexcharts'\r\nimport { useStoreState } from 'easy-peasy'\r\nimport { WidthProvider } from 'react-grid-layout'\r\n\r\nfunction Plot(props) {\r\n  const data = useStoreState(state => state.simulationTab)\r\n  const modelMetadata = useStoreState(state => state.modelMetadata)\r\n\r\n  React.useEffect(() => {\r\n    let newReactions = []\r\n    data.reactions.forEach(reaction => {\r\n      if (reaction.checked === true) {\r\n        if (reaction.ratelaw === '') {\r\n          newReactions.push({ ...reaction, ratelaw: data.globalRatelaw })\r\n        } else newReactions.push(reaction)\r\n      }\r\n    })\r\n    const modelData = {\r\n      ...modelMetadata,\r\n      reactions: newReactions,\r\n      species: data.species,\r\n    }\r\n    const dataString =\r\n      'data:text/json;charset=utf-8,' +\r\n      encodeURIComponent(JSON.stringify(modelData))\r\n    const exportAnchorElement = document.getElementById('exportAnchorElement')\r\n    exportAnchorElement.setAttribute('href', dataString)\r\n    exportAnchorElement.setAttribute('download', 'model.json')\r\n  })\r\n\r\n  let width\r\n  React.useEffect(() => {\r\n    // eslint-disable-next-line\r\n    width = (props.width * 35) / 100\r\n  }, [props.width])\r\n\r\n  if (data.graphData) {\r\n    return (\r\n      <div>\r\n        <Chart\r\n          options={{\r\n            chart: {\r\n              id: 'apexchart-example',\r\n            },\r\n            xaxis: {\r\n              type: 'numeric',\r\n              tickAmount: 10,\r\n            },\r\n          }}\r\n          series={data.graphData}\r\n          type=\"line\"\r\n          width={width}\r\n          height={600}\r\n          className=\"nonDraggableArea\"\r\n        />\r\n        <a\r\n          className=\"btn btn-dark nonDraggableArea\"\r\n          style={{ float: 'right' }}\r\n          id=\"exportAnchorElement\"\r\n          href=\"/\"\r\n        >\r\n          Export Data\r\n        </a>\r\n      </div>\r\n    )\r\n  } else return <div />\r\n}\r\n\r\nexport default WidthProvider(Plot)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { CustomInput } from 'reactstrap'\r\n\r\nfunction CustomSwitch({ specieId, toggle }) {\r\n  const [switched, setSwitched] = React.useState(true)\r\n\r\n  return (\r\n    <CustomInput\r\n      type=\"switch\"\r\n      id={specieId}\r\n      onChange={e => {\r\n        setSwitched(s => !s)\r\n        toggle(specieId)\r\n      }}\r\n      checked={switched}\r\n    />\r\n  )\r\n}\r\n\r\nCustomSwitch.propTypes = {\r\n  specieId: PropTypes.string,\r\n  toggle: PropTypes.func,\r\n}\r\n\r\nCustomSwitch.defaultProps = {\r\n  specieId: '',\r\n  toggle: () => {},\r\n}\r\n\r\nexport default CustomSwitch\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport { Table } from 'reactstrap'\r\nimport Slider from 'rc-slider'\r\nimport 'rc-slider/assets/index.css'\r\nimport CustomSwitch from './CustomSwitch'\r\n\r\nconst CSlider = Slider.createSliderWithTooltip(Slider)\r\n\r\nfunction SpeciesPanel() {\r\n  const { species, icstep, icmin, icmax } = useStoreState(\r\n    state => state.simulationTab\r\n  )\r\n\r\n  const { toggleSpecie, updateIc } = useStoreActions(\r\n    actions => actions.simulationTab\r\n  )\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n        Species\r\n      </h4>\r\n      <div\r\n        style={{ overflowY: 'auto', height: '90%' }}\r\n        className=\"nonDraggableArea shadow-inner\"\r\n      >\r\n        <Table borderless hover data-test=\"species-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Initial Concentration</th>\r\n              <th>Show in graph</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {species.map(specie => (\r\n              <tr key={specie.id}>\r\n                <th>{specie.id}</th>\r\n                <th>\r\n                  <CSlider\r\n                    style={{ width: 200 }}\r\n                    className=\"specie-slider\"\r\n                    step={icstep}\r\n                    min={icmin}\r\n                    max={icmax}\r\n                    onChange={value => {\r\n                      updateIc({\r\n                        id: specie.id,\r\n                        initialConcentration: value,\r\n                      })\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th>\r\n                  <CustomSwitch specieId={specie.id} toggle={toggleSpecie} />\r\n                </th>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SpeciesPanel\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button, Label } from 'reactstrap'\r\nimport { Formik, Form, Field } from 'formik'\r\nimport { useStoreActions } from 'easy-peasy'\r\nimport _ from 'lodash'\r\nimport { prettyPrint } from '../../../utils'\r\n\r\n/*\r\nRatelaw Form Component:\r\nDisplays a form to take in particular parameters from\r\nthe user. These parameters depend upon the ratelaw\r\nused and if the reaction is reversible or not. If custom rate\r\nis selected takes in the rate equation instead.\r\n*/\r\n\r\nfunction RatelawForm({ ratelaw, reaction, closeModal }) {\r\n  const { setRatelaw } = useStoreActions(actions => actions.simulationTab)\r\n  let element\r\n  switch (ratelaw) {\r\n    case 'mass-action':\r\n      if (reaction.reversible) {\r\n        element = (\r\n          <React.Fragment>\r\n            <Label>Forward Parameter (k1):</Label>\r\n            <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n            <Label>Backward Parameter (k2):</Label>\r\n            <Field className=\"form-control\" name=\"k2\" type=\"number\" />\r\n          </React.Fragment>\r\n        )\r\n      } else {\r\n        element = (\r\n          <React.Fragment>\r\n            <Label>Parameter (k1):</Label>\r\n            <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n          </React.Fragment>\r\n        )\r\n      }\r\n      break\r\n    case 'michaelis-menten':\r\n      if (reaction.reversible) {\r\n        element = (\r\n          <React.Fragment>\r\n            <Label>Vfmax:</Label>\r\n            <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n            <Label>Vrmax:</Label>\r\n            <Field className=\"form-control\" name=\"k2\" type=\"number\" />\r\n            <Label>KSm:</Label>\r\n            <Field className=\"form-control\" name=\"k3\" type=\"number\" />\r\n            <Label>KPm:</Label>\r\n            <Field className=\"form-control\" name=\"k4\" type=\"number\" />\r\n          </React.Fragment>\r\n        )\r\n      } else {\r\n        element = (\r\n          <React.Fragment>\r\n            <Label>Vmax:</Label>\r\n            <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n            <Label>Km:</Label>\r\n            <Field className=\"form-control\" name=\"k2\" type=\"number\" />\r\n          </React.Fragment>\r\n        )\r\n      }\r\n      break\r\n    case 'hill-equation':\r\n      element = (\r\n        <React.Fragment>\r\n          <Label>Vmax:</Label>\r\n          <Field className=\"form-control\" name=\"k1\" type=\"number\" />\r\n          <Label>\r\n            K<sub>0.5</sub>:\r\n          </Label>\r\n          <Field className=\"form-control\" name=\"k2\" type=\"number\" />\r\n          <Label>Hill coefficient:</Label>\r\n          <Field className=\"form-control\" name=\"k3\" type=\"number\" />\r\n        </React.Fragment>\r\n      )\r\n      break\r\n    case 'custom-rate':\r\n      if (reaction.reversible) {\r\n        element = (\r\n          <React.Fragment>\r\n            <div>\r\n              Species available:{' '}\r\n              {prettyPrint(\r\n                _.concat(reaction.reactants, reaction.products),\r\n                'id'\r\n              )}\r\n            </div>\r\n            <Label>Custom Forward Rate:</Label>\r\n            <Field className=\"form-control\" name=\"rateForward\" type=\"text\" />\r\n            <p>For example: 0.5 * some_specie</p>\r\n            <Label>Custom Backward Rate:</Label>\r\n            <Field className=\"form-control\" name=\"rateBackward\" type=\"text\" />\r\n            <p>For example: 0.5 * some_specie</p>\r\n          </React.Fragment>\r\n        )\r\n      } else {\r\n        element = (\r\n          <React.Fragment>\r\n            <div>\r\n              Species available:{' '}\r\n              {prettyPrint(\r\n                _.concat(reaction.reactants, reaction.products),\r\n                'id'\r\n              )}\r\n            </div>\r\n            <Label>Custom Rate:</Label>\r\n            <Field className=\"form-control\" name=\"rate\" type=\"text\" />\r\n            <p>For example: 0.5 * some_specie</p>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n      break\r\n    default:\r\n      break\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Formik\r\n        initialValues={{\r\n          k1: 0,\r\n          k2: 0,\r\n          k3: 0,\r\n          k4: 0,\r\n          rate: '',\r\n          rateForward: '',\r\n          rateBackward: '',\r\n        }}\r\n        onSubmit={async (values, actions) => {\r\n          // if custom rate is selected the rate is individual set as object properties\r\n          if (ratelaw === 'custom-rate') {\r\n            if (reaction.reversible) {\r\n              setRatelaw({\r\n                id: reaction.id,\r\n                ratelaw,\r\n                rateForward: values.rateForward,\r\n                rateBackward: values.rateBackward,\r\n              })\r\n            } else {\r\n              setRatelaw({\r\n                id: reaction.id,\r\n                ratelaw,\r\n                rate: values.rate,\r\n              })\r\n            }\r\n          } else {\r\n            /**\r\n             * Takes all the parameters input and parses it into a single array\r\n             * This is appropriately handled in the backend\r\n             */\r\n            let parameters = values\r\n            let parametersArr = []\r\n            for (let property in parameters) {\r\n              if (parameters.hasOwnProperty(property)) {\r\n                parametersArr.push(parameters[property])\r\n              }\r\n            }\r\n\r\n            setRatelaw({\r\n              id: reaction.id,\r\n              ratelaw,\r\n              parameters: parametersArr,\r\n            })\r\n          }\r\n          closeModal()\r\n        }}\r\n        render={({ handleSubmit }) => (\r\n          <Form onSubmit={handleSubmit} data-test=\"ratelaw-form\">\r\n            {element}\r\n            <br />\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"btn btn-success\"\r\n              data-test=\"ratelaw-submit-button\"\r\n            >\r\n              Submit\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nRatelawForm.propTypes = {\r\n  ratelaw: PropTypes.string,\r\n  reaction: PropTypes.object,\r\n  closeModal: PropTypes.func,\r\n}\r\n\r\nRatelawForm.defaultProps = {\r\n  ratelaw: '',\r\n  reaction: {},\r\n  closeModal: () => {},\r\n}\r\n\r\nexport default RatelawForm\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { prettyPrint } from '../../../utils'\r\n\r\nfunction ReactionInfo({ reaction }) {\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"flex\">Name: {reaction.name}</div>\r\n      <div className=\"flex\">ID: {reaction.id}</div>\r\n      <div className=\"flex\">Reversible: {String(reaction.reversible)}</div>\r\n      <div className=\"flex\">Modifiers: {prettyPrint(reaction.modifiers)}</div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nReactionInfo.propTypes = {\r\n  reaction: PropTypes.object,\r\n}\r\n\r\nReactionInfo.propTypes = {\r\n  reaction: {},\r\n}\r\n\r\nexport default ReactionInfo\r\n","import React from 'react'\r\nimport { useStoreState, useStoreActions } from 'easy-peasy'\r\nimport {\r\n  CustomInput,\r\n  Table,\r\n  Input,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  UncontrolledTooltip,\r\n} from 'reactstrap'\r\nimport { Icon } from 'react-icons-kit'\r\nimport { infoCircle } from 'react-icons-kit/fa/infoCircle'\r\nimport RatelawForm from './RatelawForm'\r\nimport ReactionInfo from './ReactionInfo'\r\n\r\nfunction ReactionsPanel() {\r\n  const [modal, setModal] = React.useState(false)\r\n  const [reactionForRatelaw, setReactionForRatelaw] = React.useState({})\r\n  const [ratelaw, setRatelaw] = React.useState('')\r\n\r\n  const reactions = useStoreState(state => state.simulationTab.reactions)\r\n\r\n  const { switchReaction } = useStoreActions(actions => actions.simulationTab)\r\n  return (\r\n    <React.Fragment>\r\n      <Modal\r\n        isOpen={modal}\r\n        toggle={() => {\r\n          setModal(!modal)\r\n        }}\r\n        className=\"nonDraggableArea\"\r\n      >\r\n        <ModalHeader>Set Ratelaw</ModalHeader>\r\n        <ModalBody>\r\n          <RatelawForm\r\n            ratelaw={ratelaw}\r\n            reaction={reactionForRatelaw}\r\n            closeModal={() => setModal(false)}\r\n          />\r\n        </ModalBody>\r\n      </Modal>\r\n      <div style={{ height: '90%' }}>\r\n        <h4 className=\"text-muted\" style={{ marginBottom: 20 }}>\r\n          Reactions\r\n        </h4>\r\n        <div\r\n          style={{ overflowY: 'auto', height: '85%' }}\r\n          className=\"shadow-inner nonDraggableArea\"\r\n        >\r\n          <Table borderless hover data-test=\"reactions-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Toggle</th>\r\n                <th>Reaction String</th>\r\n                <th>Ratelaw</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {reactions.map(reaction => (\r\n                <tr key={reaction.id}>\r\n                  <th>\r\n                    <CustomInput\r\n                      type=\"switch\"\r\n                      id={reaction.id}\r\n                      checked={reaction.checked}\r\n                      onChange={() => {\r\n                        switchReaction(reaction)\r\n                      }}\r\n                    />\r\n                  </th>\r\n\r\n                  <th>\r\n                    {reaction.id}: {reaction.reactionString}{' '}\r\n                    <Icon icon={infoCircle} id={`${reaction.id}-info`} />\r\n                    <UncontrolledTooltip\r\n                      placement=\"right\"\r\n                      target={`${reaction.id}-info`}\r\n                    >\r\n                      <ReactionInfo reaction={reaction} />\r\n                    </UncontrolledTooltip>\r\n                  </th>\r\n                  <th>\r\n                    <Input\r\n                      onChange={e => {\r\n                        if (!(e.target.value === '')) setModal(!modal)\r\n                        setRatelaw(e.target.value)\r\n                        setReactionForRatelaw(reaction)\r\n                      }}\r\n                      value={reaction.ratelaw}\r\n                      type=\"select\"\r\n                      id={`${reaction.id}-select`}\r\n                    >\r\n                      <option value=\"\">Set a ratelaw!</option>\r\n                      <option value=\"mass-action\">Mass Action</option>\r\n                      {reaction.modifiers.length === 0 ||\r\n                      (reaction.reactants.length > 1 ||\r\n                        reaction.products.length > 1) ? (\r\n                        <React.Fragment />\r\n                      ) : (\r\n                        <option value=\"michaelis-menten\">\r\n                          Michaelis Menten\r\n                        </option>\r\n                      )}\r\n                      {reaction.modifiers.length === 0 ||\r\n                      (reaction.reactants.length > 1 ||\r\n                        reaction.products.length > 1) ||\r\n                      reaction.reversible ? (\r\n                        <React.Fragment />\r\n                      ) : (\r\n                        <option value=\"hill-equation\">\r\n                          Hill Kinetics Equation\r\n                        </option>\r\n                      )}\r\n                      <option value=\"custom-rate\">Custom Rate</option>\r\n                    </Input>\r\n                  </th>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </Table>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default ReactionsPanel\r\n","import React from 'react'\r\nimport SettingsPanel from './SettingsPanel'\r\nimport Plot from './Plot'\r\nimport SpeciesPanel from './SpeciesPanel'\r\nimport ReactionsPanel from './ReactionsPanel'\r\nimport { Responsive, WidthProvider } from 'react-grid-layout'\r\nimport './style.scss'\r\n\r\nconst ResponsiveGridLayout = WidthProvider(Responsive)\r\n\r\nfunction SimulationTab() {\r\n  let layouts = {\r\n    lg: [\r\n      { i: 'settings', x: 0, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'species', x: 3, y: 0, w: 4, h: 7, minW: 4, minH: 7 },\r\n      { i: 'plot', x: 7, y: 0, w: 5, h: 14, minW: 5, minH: 14 },\r\n      { i: 'reactions', x: 0, y: 8, w: 7, h: 6, minW: 7, minH: 6 },\r\n    ],\r\n    md: [\r\n      { i: 'settings', x: 0, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'species', x: 3, y: 0, w: 4, h: 7, minW: 4, minH: 7 },\r\n      { i: 'plot', x: 7, y: 0, w: 5, h: 15, minW: 5, minH: 14 },\r\n      { i: 'reactions', x: 0, y: 8, w: 7, h: 6, minW: 7, minH: 6 },\r\n    ],\r\n    sm: [\r\n      { i: 'settings', x: 0, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'species', x: 3, y: 0, w: 4, h: 7, minW: 4, minH: 7 },\r\n      { i: 'plot', x: 7, y: 0, w: 5, h: 15, minW: 5, minH: 14 },\r\n      { i: 'reactions', x: 0, y: 8, w: 7, h: 6, minW: 7, minH: 6 },\r\n    ],\r\n    xs: [\r\n      { i: 'settings', x: 0, y: 0, w: 3, h: 7, minW: 3, minH: 7 },\r\n      { i: 'species', x: 3, y: 0, w: 4, h: 7, minW: 4, minH: 7 },\r\n      { i: 'plot', x: 7, y: 0, w: 5, h: 15, minW: 5, minH: 14 },\r\n      { i: 'reactions', x: 0, y: 8, w: 7, h: 6, minW: 7, minH: 6 },\r\n    ],\r\n  }\r\n  return (\r\n    <ResponsiveGridLayout\r\n      className=\"layout\"\r\n      layouts={layouts}\r\n      breakpoints={{ lg: 1200, md: 996, sm: 768, xs: 480 }}\r\n      cols={{ lg: 12, md: 10, sm: 6, xs: 4, xxs: 2 }}\r\n      rowHeight={40}\r\n      items={4}\r\n      draggableCancel=\".nonDraggableArea\"\r\n    >\r\n      <div key=\"settings\">\r\n        <SettingsPanel />\r\n      </div>\r\n      <div key=\"species\">\r\n        <SpeciesPanel />\r\n      </div>\r\n      <div key=\"plot\">\r\n        <Plot />\r\n      </div>\r\n      <div key=\"reactions\">\r\n        <ReactionsPanel />\r\n      </div>\r\n    </ResponsiveGridLayout>\r\n  )\r\n}\r\n\r\nexport default SimulationTab\r\n","import React from 'react'\r\nimport { HashRouter, Switch, Route } from 'react-router-dom'\r\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap'\r\nimport { toast } from 'react-toastify'\r\nimport 'react-toastify/dist/ReactToastify.css'\r\nimport NavBar from './components/NavBar'\r\nimport ImportSbmlForm from './components/ImportSbmlForm'\r\nimport SavedModels from './components/SavedModels'\r\nimport ModelTab from './components/ModelTab'\r\nimport SimulationTab from './components/SimulationTab/'\r\n\r\ntoast.configure({\r\n  position: toast.POSITION.BOTTOM_RIGHT,\r\n  autoClose: 2000,\r\n})\r\n\r\nfunction App() {\r\n  const [importModal, setImportModal] = React.useState(false)\r\n  const [savedModal, setSavedModal] = React.useState(false)\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <HashRouter>\r\n        <NavBar\r\n          importModel={() => setImportModal(!importModal)}\r\n          savedModels={() => setSavedModal(!importModal)}\r\n        />\r\n        <Modal isOpen={importModal} toggle={() => setImportModal(!importModal)}>\r\n          <ModalHeader toggle={() => setImportModal(!importModal)}>\r\n            Import an existing SBML Model\r\n          </ModalHeader>\r\n          <ModalBody>\r\n            <ImportSbmlForm closeModal={() => setImportModal(!importModal)} />\r\n          </ModalBody>\r\n        </Modal>\r\n        <Modal isOpen={savedModal} toggle={() => setSavedModal(!savedModal)}>\r\n          <ModalHeader toggle={() => setSavedModal(!savedModal)}>\r\n            Saved Models\r\n          </ModalHeader>\r\n          <ModalBody>\r\n            <SavedModels />\r\n          </ModalBody>\r\n        </Modal>\r\n        <Switch>\r\n          <Route path=\"/simulation\" component={SimulationTab} />\r\n          <Route path=\"/\" component={ModelTab} />\r\n        </Switch>\r\n      </HashRouter>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { StoreProvider } from 'easy-peasy'\nimport { store } from './store'\nimport { Helmet } from 'react-helmet'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './index.scss'\n\nReactDOM.render(\n  <StoreProvider store={store}>\n    <Helmet>\n      <meta charSet=\"utf-8\" />\n      <title>ODE-APP</title>\n    </Helmet>\n    <App />\n  </StoreProvider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}